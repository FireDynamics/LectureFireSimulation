

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Data Analysis II &#8212; Fire Simulation &lt;br&gt; Lecture Notes</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" href="../../../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"tex": {"macros": {"vv": "\\vec{v}", "vu": "\\vec{u}", "mf": "\\small\\sf", "dQ": "\\dot{Q}", "dq": "\\dot{q}", "dm": "\\dot{m}", "du": "\\dot{u}"}}, "options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'content/examples/02_intermediate/05_data_analysis_02';</script>
    <link rel="canonical" href="https://firedynamics.github.io/LectureFireSimulation/content/examples/02_intermediate/05_data_analysis_02.html" />
    <link rel="shortcut icon" href="../../../_static/cce_logo_standalone_icon.png"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Build FDS Input Lines Using Python String Manipulation" href="06_build_fds_input.html" />
    <link rel="prev" title="Repetitive Execution of Scripts" href="04_repeated_sim_exec.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../../overview/01_overview.html">
  
  
  
  
    
    
      
    
    
    <img src="../../../_static/cce_logo.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../../../_static/cce_logo.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../overview/01_overview.html">
                    Overview
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../overview/02_team.html">Team Fire Dynamics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview/03_references.html">References</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Modelling</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../modelling/01_general/00_overview.html">1. Modelling Fires</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../modelling/01_general/01_processes.html">1.1. Physical and Chemical Processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../modelling/01_general/02_fse.html">1.2. Fire Safety Engineering</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../modelling/01_general/03_approaches.html">1.3. Modelling Approaches</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../modelling/02_fluids/00_overview.html">2. Fluid Dynamics</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../modelling/02_fluids/01_fluids.html">2.1. Fluids</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../modelling/02_fluids/02_cfd.html">2.2. Computational Fluid Dynamics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../modelling/02_fluids/03_turbulence.html">2.3. Turbulence</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../modelling/03_compartments/00_overview.html">3. Compartment Fires</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../modelling/03_compartments/01_fundamentals.html">3.1. Fundamentals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../modelling/03_compartments/03_pool_example.html">3.2. Example – Pool Fire</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../modelling/03_compartments/04_steckler_example.html">3.3. Example - Steckler Compartment</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../modelling/04_thermodynamics/00_overview.html">4. Thermodynamics</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../modelling/04_thermodynamics/01_fundamentals.html">4.1. Fundamentals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../modelling/04_thermodynamics/02_example_energy_mass_transfer.html">4.2. Energy and Mass Transfer</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../modelling/05_combustion/00_overview.html">5. Combustion</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../modelling/05_combustion/01_fundamentals.html">5.1. Fundamentals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../modelling/05_combustion/02_modelling.html">5.2. Modelling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../modelling/05_combustion/03_closed_volume_example.html">5.3. Example – Closed Volume</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../modelling/05_combustion/04_burner_example.html">5.4. Wolfhard-Parker Burner</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../modelling/06_heat_transfer/00_overview.html">6. Heat Transfer</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../modelling/06_heat_transfer/01_fundamentals.html">6.1. Fundamentals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../modelling/06_heat_transfer/02_heat_transfer_example.html">6.2. Example – Heat Transfer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../modelling/06_heat_transfer/03_validation_example.html">6.3. Validation – Heat Transfer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../modelling/06_heat_transfer/04_ht3d_example.html">6.4. Example – 3D Heat Transfer</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../modelling/07_particles/00_overview.html">7. Particles</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../modelling/07_particles/01_fundamentals.html">7.1. Modelling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../modelling/07_particles/02_example_spray.html">7.2. Example – Sprays</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../modelling/09_pyrolysis/00_overview.html">8. Pyrolysis</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-8"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../modelling/09_pyrolysis/01_fundamentals.html">8.1. Fundamentals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../modelling/09_pyrolysis/02_example.html">8.2. Example - Gasification of PMMA</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../01_basic/00_overview.html">Basic</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-9"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../01_basic/01_basic_example_i.html">Basic FDS Example I</a></li>
<li class="toctree-l2"><a class="reference internal" href="../01_basic/02_basic_example_ii.html">Basic FDS Example II</a></li>
<li class="toctree-l2"><a class="reference internal" href="../01_basic/03_basic_example_iii.html">Basic Example III</a></li>
<li class="toctree-l2"><a class="reference internal" href="../01_basic/04_basic_example_iv.html">Basic Example IV</a></li>
<li class="toctree-l2"><a class="reference internal" href="../01_basic/05_basic_example_v.html">Basic Example V</a></li>
</ul>
</li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="00_overview.html">Intermediate</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-10"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="01_data_analysis_01.html">Data Analysis I</a></li>
<li class="toctree-l2"><a class="reference internal" href="02_adjust_fds_input.html">Adjust FDS Input Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="03_work_flow.html">Work Flow Proposal</a></li>
<li class="toctree-l2"><a class="reference internal" href="04_repeated_sim_exec.html">Repetitive Execution of Scripts</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Data Analysis II</a></li>
<li class="toctree-l2"><a class="reference internal" href="06_build_fds_input.html">Build FDS Input Lines Using Python String Manipulation</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../03_advanced/00_overview.html">Advanced</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-11"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../03_advanced/McCaffrey.html">McCaffrey Plumes</a></li>

<li class="toctree-l2"><a class="reference internal" href="../03_advanced/02_example_stecklercompartments.html">Steckler Compartments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../03_advanced/03_example_zukoskiplumes.html">Zukoski Plumes</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Tools</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../tools/01_fds_smv/00_overview.html">FDS and SMV</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-12"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../tools/01_fds_smv/01_fds_intro.html">FDS Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools/01_fds_smv/02_fds_tutorial.html">FDS Basic Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools/01_fds_smv/03_smv.html">Smokeview Basics</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../tools/02_hpc/00_overview.html">HPC</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-13"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../tools/02_hpc/01_linux.html">Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools/02_hpc/02_hpc.html">High Performance Computing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools/02_hpc/03_parallel_fds.html">Parallel Execution of FDS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools/02_hpc/04_benchmarking.html">Benchmarking</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../tools/03_analysis/00_overview.html">Data Analysis</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-14"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../tools/03_analysis/01_python.html">Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tools/03_analysis/03_example_mccaffreyplumes.html">Example: McCaffrey plume experiments</a></li>


<li class="toctree-l2"><a class="reference internal" href="../../tools/03_analysis/02_fdsreader.html">fdsreader Module</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Teaching</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../teaching/01_firesim_lecture/00_overview.html">Fire Simulation Lecture @ BUW</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-15"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../teaching/01_firesim_lecture/01_week_01.html">Week 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../teaching/01_firesim_lecture/02_week_02.html">Week 2</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../teaching/02_cobra_workshop/00_overview.html">CoBra Workshop</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-16"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../teaching/02_cobra_workshop/01_ws_01.html">CoBra Workshop I</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../teaching/02_cobra_workshop/02_ws_01.html">CoBra Workshop II</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../teaching/02_cobra_workshop/03_ws_01.html">CoBra Workshop III</a></li>
</ul>
</li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://io.cce.uni-wuppertal.de/firesim_ss21/hub/user-redirect/git-pull?repo=https%3A//github.com/FireDynamics/LectureFireSimulation&urlpath=tree/LectureFireSimulation/book/content/examples/02_intermediate/05_data_analysis_02.ipynb&branch=main" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onJupyterHub"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="../../../_static/images/logo_jupyterhub.svg">
  </span>
<span class="btn__text-container">JupyterHub</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/FireDynamics/LectureFireSimulation" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/FireDynamics/LectureFireSimulation/edit/main/book/content/examples/02_intermediate/05_data_analysis_02.ipynb" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/FireDynamics/LectureFireSimulation/issues/new?title=Issue%20on%20page%20%2Fcontent/examples/02_intermediate/05_data_analysis_02.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../../_sources/content/examples/02_intermediate/05_data_analysis_02.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Data Analysis II</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#aset-map">ASET Map</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#smoke-layer">Smoke layer</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <div class="cell tag_hide_cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># import matplotlib</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;figure.figsize&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">fdsreader</span>

<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">display</span>
<span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>
</pre></div>
</div>
</div>
</div>
<section class="tex2jax_ignore mathjax_ignore" id="data-analysis-ii">
<h1>Data Analysis II<a class="headerlink" href="#data-analysis-ii" title="Permalink to this heading">#</a></h1>
<p>This example demonstrates an analysis of slice data, here to determine the map of available safe egress time (ASET) and the temporal evolution of the smoke layer height. The used scenario is a multi-room appartment.</p>
<figure class="align-default" id="fig-example-dataanalysis2-scenario-geometry">
<a class="reference internal image-reference" href="../../../_images/appartment_geometry.png"><img alt="../../../_images/appartment_geometry.png" src="../../../_images/appartment_geometry.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 3 </span><span class="caption-text">Visualization of the appartment geometry.</span><a class="headerlink" href="#fig-example-dataanalysis2-scenario-geometry" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<div class="tip dropdown admonition">
<p class="admonition-title">Full FDS input file</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&amp;HEAD CHID=&#39;Appartment&#39; TITLE=&#39;Example in the Fire Simulation Lecture&#39; /
&amp;TIME T_END=300.0 /

&amp;MISC BNDF_DEFAULT = F /
&amp;BNDF QUANTITY = &#39;WALL TEMPERATURE&#39; /



# ---------------------------------------
# Domain boundary
# ---------------------------------------

&amp;VENT DB=&#39;YMAX&#39;, SURF_ID=&#39;OPEN&#39; /

&amp;VENT ID=&#39;OpenCeiling&#39;
      SURF_ID=&#39;OPEN&#39;
      XB=-1.5000,9.3000,4.3000,5.0000,2.2000,2.2000 /
&amp;VENT ID=&#39;OpenLeft&#39;
      SURF_ID=&#39;OPEN&#39;
      XB=9.3000,9.3000,4.3000,5.0000,0.0000,2.2000 /
&amp;VENT ID=&#39;OpenRight&#39;
      SURF_ID=&#39;OPEN&#39;
      XB=-1.5000,-1.5000,4.3000,5.0000,0.0000,2.2000 /



# ---------------------------------------
# Gas burner: methane
# ---------------------------------------
&amp;SPEC ID = &#39;METHANE&#39; /

&amp;REAC FUEL               = &#39;METHANE&#39;,
      SOOT_YIELD         = 0.060,
      RADIATIVE_FRACTION = 0.02 /

# Burners:
&amp;SURF ID         = &#39;BURNER&#39;,
      HRRPUA     = 1000.0,
      TMP_FRONT  = 250.0,
      COLOR      = &#39;RASPBERRY&#39; /

&amp;OBST ID       = &#39;BurnerBase&#39;,
      SURF_IDS = &#39;BURNER&#39;, &#39;Wall Lining&#39;, &#39;Wall Lining&#39;,
      XB = -0.20,0.20, -0.20,0.20, 0.00,0.20 /



# ---------------------------------------
# Surface definition (boundary conditions)
# ---------------------------------------

&amp;SURF ID                      = &#39;Wall Lining&#39;,
      COLOR                   = &#39;BEIGE&#39;,
      DEFAULT                 = T,
      THICKNESS(1:1)          = 0.0254,
      MATL_ID(1,1:1)          = &#39;MARINITE&#39;,
      MATL_MASS_FRACTION(1,1) = 1.0 /


&amp;MATL ID            = &#39;MARINITE&#39;
      EMISSIVITY    = 0.9
      DENSITY       = 737.
      SPECIFIC_HEAT = 1.2
      CONDUCTIVITY  = 0.12 /



--- Computational domain  - 8 MESH

Cell Qty: 19008 | Size: 0.100·0.100·0.100m | Aspect: 1.0 | Poisson: No
&amp;MESH ID=&#39;Domain&#39; IJK=27,32,22 XB=-1.5000,1.2000,1.8000,5.0000,0.0000,2.2000 /
Cell Qty: 19008 | Size: 0.100·0.100·0.100m | Aspect: 1.0 | Poisson: No
&amp;MESH ID=&#39;Domain.001&#39; IJK=27,32,22 XB=1.2000,3.9000,1.8000,5.0000,0.0000,2.2000 /
Cell Qty: 19008 | Size: 0.100·0.100·0.100m | Aspect: 1.0 | Poisson: No
&amp;MESH ID=&#39;Domain.002&#39; IJK=27,32,22 XB=3.9000,6.6000,1.8000,5.0000,0.0000,2.2000 /
Cell Qty: 19008 | Size: 0.100·0.100·0.100m | Aspect: 1.0 | Poisson: No
&amp;MESH ID=&#39;Domain.003&#39; IJK=27,32,22 XB=6.6000,9.3000,1.8000,5.0000,0.0000,2.2000 /
Cell Qty: 19008 | Size: 0.100·0.100·0.100m | Aspect: 1.0 | Poisson: No
&amp;MESH ID=&#39;Domain.004&#39; IJK=27,32,22 XB=6.6000,9.3000,-1.4000,1.8000,0.0000,2.2000 /
Cell Qty: 19008 | Size: 0.100·0.100·0.100m | Aspect: 1.0 | Poisson: No
&amp;MESH ID=&#39;Domain.005&#39; IJK=27,32,22 XB=3.9000,6.6000,-1.4000,1.8000,0.0000,2.2000 /
Cell Qty: 19008 | Size: 0.100·0.100·0.100m | Aspect: 1.0 | Poisson: No
&amp;MESH ID=&#39;Domain.006&#39; IJK=27,32,22 XB=1.2000,3.9000,-1.4000,1.8000,0.0000,2.2000 /
Cell Qty: 19008 | Size: 0.100·0.100·0.100m | Aspect: 1.0 | Poisson: No
&amp;MESH ID=&#39;Domain.007&#39; IJK=27,32,22
      XB=-1.5000,1.2000,-1.4000,1.8000,0.0000,2.2000 /



--- Geometric namelists from Blender Collections

-- Blender Collection: &lt;Obstacles&gt;
&amp;OBST ID=&#39;AppartmentDoor&#39;,
      XB=4.6000,5.1000,4.2000,4.3000,0.0000,2.2000 SURF_ID=&#39;Wall Lining&#39; /
&amp;OBST ID=&#39;AppartmentDoor.001&#39;,
      XB=5.9000,6.4000,4.2000,4.3000,0.0000,2.2000 SURF_ID=&#39;Wall Lining&#39; /
&amp;OBST ID=&#39;AppartmentDoor.002&#39;,
      XB=5.1000,5.9000,4.2000,4.3000,1.8000,2.2000 SURF_ID=&#39;Wall Lining&#39; /

&amp;OBST ID=&#39;Ceiling&#39; SURF_ID=&#39;Wall Lining&#39;
      XB=-1.5000,4.6000,-1.5000,4.3000,2.2000,2.3100 SURF_ID=&#39;Wall Lining&#39; /
&amp;OBST ID=&#39;Ceiling.001&#39; SURF_ID=&#39;Wall Lining&#39;
      XB=4.6000,9.4000,-1.5000,4.3000,2.2000,2.3100 SURF_ID=&#39;Wall Lining&#39; /
&amp;OBST ID=&#39;Floor&#39;, XB=-1.5000,9.4000,-1.5000,6.3100,-0.1100,0.0000
      SURF_ID=&#39;Wall Lining&#39; /

&amp;OBST ID=&#39;WallBack&#39;,
      XB=-1.5000,-1.4000,-1.4000,4.2000,0.0000,2.2000 SURF_ID=&#39;Wall Lining&#39;
      BNDF_OBST=T /
&amp;OBST ID=&#39;WallBack.001&#39;,
      XB=9.3000,9.4000,-1.5000,4.3000,0.0000,2.2000 SURF_ID=&#39;Wall Lining&#39; /
&amp;OBST ID=&#39;WallBathroom&#39;,
      XB=6.5000,7.5000,1.4000,1.5100,0.0000,2.2000 SURF_ID=&#39;Wall Lining&#39; /
&amp;OBST ID=&#39;WallBathroom.001&#39;,
      XB=8.3000,9.3200,1.4000,1.5100,0.0000,2.2000 SURF_ID=&#39;Wall Lining&#39; /
&amp;OBST ID=&#39;WallBathroom.002&#39;,
      XB=7.5000,8.3000,1.4000,1.5100,1.8000,2.2000 SURF_ID=&#39;Wall Lining&#39; /
&amp;OBST ID=&#39;WallCorridorKitchen&#39;,
      XB=6.4000,6.5000,0.4000,4.3000,0.0000,2.2000 SURF_ID=&#39;Wall Lining&#39; /
&amp;OBST ID=&#39;WallCorridorKitchen.001&#39;,
      XB=6.4000,6.5000,-1.5000,-0.4000,0.0000,2.2000 SURF_ID=&#39;Wall Lining&#39; /
&amp;OBST ID=&#39;WallCorridorKitchen.002&#39;,
      XB=6.4000,6.5000,-0.4000,0.4000,1.8000,2.2000 SURF_ID=&#39;Wall Lining&#39; /
&amp;OBST ID=&#39;WallCorridorLivingroom&#39;,
      XB=4.5000,4.6000,-1.5000,-0.4000,0.0000,2.2000 SURF_ID=&#39;Wall Lining&#39;
      BNDF_OBST=T /
&amp;OBST ID=&#39;WallCorridorLivingroom.001&#39;,
      XB=4.5000,4.6000,0.4000,4.3000,0.0000,2.2000 SURF_ID=&#39;Wall Lining&#39;
      BNDF_OBST=T /
&amp;OBST ID=&#39;WallCorridorLivingroom.002&#39;,
      XB=4.5000,4.6000,-0.4000,0.4000,1.8000,2.2000 SURF_ID=&#39;Wall Lining&#39;
      BNDF_OBST=T /
&amp;OBST ID=&#39;WallLeft&#39;,
      XB=-1.5000,4.5000,-1.5000,-1.4000,0.0000,2.2000 SURF_ID=&#39;Wall Lining&#39; /
&amp;OBST ID=&#39;WallLeft.001&#39;,
      XB=6.5000,9.3000,4.2000,4.3000,0.0000,2.2000 SURF_ID=&#39;Wall Lining&#39; /
&amp;OBST ID=&#39;WallLeft.002&#39;,
      XB=4.6000,6.4000,-1.5000,-1.4000,0.0000,2.2000 SURF_ID=&#39;Wall Lining&#39; /
&amp;OBST ID=&#39;WallRight&#39;,
      XB=-1.5000,4.5000,4.2000,4.3000,0.0000,2.2000 SURF_ID=&#39;Wall Lining&#39; /
&amp;OBST ID=&#39;WallRight.001&#39;,
      XB=6.5000,9.3000,-1.5000,-1.4000,0.0000,2.2000 SURF_ID=&#39;Wall Lining&#39; /



# ---------------------------------------
# Analytics
# ---------------------------------------

&amp;SLCF ID            = &#39;DoorLivingroomTempX&#39;,
      PBX           = 4.5500,
      QUANTITY      = &#39;TEMPERATURE&#39;,
      CELL_CENTERED = T /
&amp;SLCF ID            = &#39;BurnerTempX&#39;,
      PBX           = 0.0000,
      QUANTITY      = &#39;TEMPERATURE&#39;
      CELL_CENTERED = T /
&amp;SLCF ID            = &#39;CorridorTempX&#39;
      PBX           = 5.5000,
      QUANTITY      = &#39;TEMPERATURE&#39;,
      CELL_CENTERED = T /
&amp;SLCF ID            = &#39;KitchenTempX&#39;
      PBX           = 7.9000,
      QUANTITY      = &#39;TEMPERATURE&#39;,
      CELL_CENTERED = T /
&amp;SLCF ID            = &#39;LivingRoomTempX&#39;
      PBX           = 3.5000,
      QUANTITY      = &#39;TEMPERATURE&#39;,
      CELL_CENTERED = T /
&amp;SLCF ID            = &#39;BurnerTempY&#39;
      PBY           = 0.0000,
      QUANTITY      = &#39;TEMPERATURE&#39;,
      CELL_CENTERED = T /
&amp;SLCF ID            = &#39;TempZ_1.0m&#39;
      PBZ           = 1.0000,
      QUANTITY      = &#39;TEMPERATURE&#39;,
      CELL_CENTERED = T /
&amp;SLCF ID            = &#39;TempZ_1.5m&#39;
      PBZ           = 1.5000,
      QUANTITY      = &#39;TEMPERATURE&#39;,
      CELL_CENTERED = T /
&amp;SLCF ID            = &#39;TempZ_2.0m&#39;
      PBZ           = 2.0000,
      QUANTITY      = &#39;TEMPERATURE&#39;,
      CELL_CENTERED = T /

&amp;SLCF ID            = &#39;DoorLivingroomSootDensityX&#39;,
      PBX           = 4.5500,
      QUANTITY      = &#39;DENSITY&#39;,
      SPEC_ID       = &#39;SOOT&#39;,
      CELL_CENTERED = T /
&amp;SLCF ID            = &#39;BurnerSootDensityX&#39;,
      PBX           = 0.0000,
      QUANTITY      = &#39;DENSITY&#39;
      SPEC_ID       = &#39;SOOT&#39;,      
      CELL_CENTERED = T /
&amp;SLCF ID            = &#39;CorridorSootDensityX&#39;
      PBX           = 5.5000,
      QUANTITY      = &#39;DENSITY&#39;,
      SPEC_ID       = &#39;SOOT&#39;,
      CELL_CENTERED = T /
&amp;SLCF ID            = &#39;KitchenSootDensityX&#39;
      PBX           = 7.9000,
      QUANTITY      = &#39;DENSITY&#39;,
      SPEC_ID       = &#39;SOOT&#39;,
      CELL_CENTERED = T /
&amp;SLCF ID            = &#39;LivingRoomSootDensityX&#39;
      PBX           = 3.5000,
      QUANTITY      = &#39;DENSITY&#39;,
      SPEC_ID       = &#39;SOOT&#39;,
      CELL_CENTERED = T /
&amp;SLCF ID            = &#39;BurnerSootDensityY&#39;
      PBY           = 0.0000,
      QUANTITY      = &#39;DENSITY&#39;,
      SPEC_ID       = &#39;SOOT&#39;,
      CELL_CENTERED = T /
&amp;SLCF ID            = &#39;SootDensityZ_1.0m&#39;
      PBZ           = 1.0000,
      QUANTITY      = &#39;DENSITY&#39;,
      SPEC_ID       = &#39;SOOT&#39;,
      CELL_CENTERED = T /
&amp;SLCF ID            = &#39;SootDensityZ_1.5m&#39;
      PBZ           = 1.5000,
      QUANTITY      = &#39;DENSITY&#39;,
      SPEC_ID       = &#39;SOOT&#39;,
      CELL_CENTERED = T /
&amp;SLCF ID            = &#39;SootDensityZ_2.0m&#39;
      PBZ           = 2.0000,
      QUANTITY      = &#39;DENSITY&#39;,
      SPEC_ID       = &#39;SOOT&#39;,
      CELL_CENTERED = T /


&amp;SLCF ID            = &#39;DoorLivingroomUVelX&#39;,
      PBX           = 4.5500,
      QUANTITY      = &#39;U-VELOCITY&#39;,
      CELL_CENTERED = T /

&amp;SLCF ID            = &#39;DoorLivingroomDensityX&#39;,
      PBX           = 4.5500,
      QUANTITY      = &#39;DENSITY&#39;,
      CELL_CENTERED = T /

&amp;TAIL /
</pre></div>
</div>
</div>
<div class="tip admonition">
<p class="admonition-title">Precomputed simulation data</p>
<p><a class="reference external" href="https://uni-wuppertal.sciebo.de/s/p8nn60Kmtd3qoRt/download?path=%2F&amp;files=compartment_appartment_01.zip">Download link</a></p>
</div>
<p>As shown in <span class="xref myst">the introduction to fdsreader</span>, the FDS simulation results can be read as Python data structures. The simulation consists out of eight meshes.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">path_to_data</span> <span class="o">=</span> <span class="s1">&#39;data/compartment/appartment_01/rundir&#39;</span>

<span class="n">sim</span> <span class="o">=</span> <span class="n">fdsreader</span><span class="o">.</span><span class="n">Simulation</span><span class="p">(</span><span class="n">path_to_data</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sim</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Simulation(chid=Appartment,
           meshes=8,
           obstructions=23,
           slices=20,
           smoke_3d=3)
</pre></div>
</div>
</div>
</div>
<section id="aset-map">
<h2>ASET Map<a class="headerlink" href="#aset-map" title="Permalink to this heading">#</a></h2>
<p>This section demonstrate how to compute ASET maps based on the procedure described in <span id="id1">[<a class="reference internal" href="../../overview/03_references.html#id2" title="Benjamin Schröder, Lukas Arnold, and Armin Seyfried. A map representation of the ASET-RSET concept. Fire Safety Journal, 115:103154, 2020. doi:10.1016/j.firesaf.2020.103154.">SAS20</a>]</span>. The basic idea is to determine for each position in the compartment the first time that a tenability criterion is exceeded. The result is a time map.</p>
<p>Although the procedure is based on multiple criteria, for simlicity only one quantity, here the soot density, is used. Its values are evaluated in a z-normal slice at an arbitrary height of <span class="math notranslate nohighlight">\(\SI{1.5}{\meter}\)</span>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># get the soot density slice, normal to z at 1.5m height</span>
<span class="n">slc</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">slices</span><span class="o">.</span><span class="n">get_by_id</span><span class="p">(</span><span class="s1">&#39;SootDensityZ_1.5m&#39;</span><span class="p">)</span>

<span class="c1"># as the simulation is based on multiple meshes, a global </span>
<span class="c1"># data structure is created, walls are represented as</span>
<span class="c1"># non-valid data points, i.e. nan</span>
<span class="n">slc_data</span> <span class="o">=</span> <span class="n">slc</span><span class="o">.</span><span class="n">to_global</span><span class="p">(</span><span class="n">masked</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>First, a visualisation of the data at a selected point is done with the <code class="docutils literal notranslate"><span class="pre">imshow</span></code> function.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># find the time index</span>
<span class="n">it</span> <span class="o">=</span> <span class="n">slc</span><span class="o">.</span><span class="n">get_nearest_timestep</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>

<span class="c1"># visualise the data</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">slc_data</span><span class="p">[</span><span class="n">it</span><span class="p">,:,:]</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s1">&#39;lower&#39;</span><span class="p">,</span> <span class="n">extent</span><span class="o">=</span><span class="n">slc</span><span class="o">.</span><span class="n">extent</span><span class="o">.</span><span class="n">as_list</span><span class="p">())</span>

<span class="c1"># add labels</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Soot Density at t=</span><span class="si">{</span><span class="n">slc</span><span class="o">.</span><span class="n">times</span><span class="p">[</span><span class="n">it</span><span class="p">]</span><span class="si">:</span><span class="s1">.2f</span><span class="si">}</span><span class="s1">s&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;position / m&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;position / m&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">orientation</span><span class="o">=</span><span class="s1">&#39;horizontal&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">slc</span><span class="o">.</span><span class="n">quantity</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1"> / </span><span class="si">{</span><span class="n">slc</span><span class="o">.</span><span class="n">quantity</span><span class="o">.</span><span class="n">unit</span><span class="si">}</span><span class="s1">&#39;</span> <span class="p">)</span>

<span class="c1"># save output to file</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;figs/appartment_soot_z.svg&#39;</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<figure class="align-default" id="fig-example-dataanalysis2-soot-z">
<a class="reference internal image-reference" href="../../../_images/appartment_soot_z.svg"><img alt="../../../_images/appartment_soot_z.svg" src="../../../_images/appartment_soot_z.svg" width="100%" /></a>
<figcaption>
<p><span class="caption-number">Fig. 4 </span><span class="caption-text">Visualization of the soot density.</span><a class="headerlink" href="#fig-example-dataanalysis2-soot-z" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>Now, the local ASET values are computed:</p>
<ol class="arabic simple">
<li><p>Iterate over all spatial elements of the slice</p></li>
<li><p>Determine all points in time which exceed the tenability threshold</p></li>
<li><p>If this happens at any time, set the first time to be the local ASET value</p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># set arbitrary values as tenability threshold</span>
<span class="n">soot_density_limit</span> <span class="o">=</span> <span class="mf">1e-4</span>

<span class="c1"># create a map with max ASET as default value</span>
<span class="n">aset_map</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">full_like</span><span class="p">(</span><span class="n">slc_data</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">slc</span><span class="o">.</span><span class="n">times</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>

<span class="c1"># set walls to nan</span>
<span class="n">aset_map</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">slc_data</span><span class="p">[</span><span class="mi">0</span><span class="p">,:,:])]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>

<span class="c1"># 1D loop over all array indices, ix is a two dimensional index</span>
<span class="k">for</span> <span class="n">ix</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">ndindex</span><span class="p">(</span><span class="n">aset_map</span><span class="o">.</span><span class="n">shape</span><span class="p">):</span>
    
    <span class="c1"># find spatialy local values which exceed the given limit </span>
    <span class="n">local_aset</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">slc_data</span><span class="p">[:,</span> <span class="n">ix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">ix</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">&gt;</span> <span class="n">soot_density_limit</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    
    <span class="c1"># if any value exists</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">local_aset</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="c1"># use the first, i.e. first in time, as the local ASET value</span>
        <span class="n">aset_map</span><span class="p">[</span><span class="n">ix</span><span class="p">]</span> <span class="o">=</span> <span class="n">slc</span><span class="o">.</span><span class="n">times</span><span class="p">[</span><span class="n">local_aset</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
</pre></div>
</div>
</div>
</div>
<p>With the computed map, a graphical respresentation of the ASET map is done the same way as with the other quantities. Here, a discrete color map is used.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># create a discrete (12 values) color map</span>
<span class="c1"># cmap = matplotlib.cm.get_cmap(&#39;jet_r&#39;, 12)</span>
<span class="n">cmap</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">cm</span><span class="o">.</span><span class="n">get_cmap</span><span class="p">(</span><span class="s1">&#39;jet_r&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">)</span>

<span class="c1"># visualise the data</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">aset_map</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s1">&#39;lower&#39;</span><span class="p">,</span> <span class="n">extent</span><span class="o">=</span><span class="n">slc</span><span class="o">.</span><span class="n">extent</span><span class="o">.</span><span class="n">as_list</span><span class="p">(),</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;ASET Map with Soot Density Limit of </span><span class="si">{</span><span class="n">soot_density_limit</span><span class="si">:</span><span class="s1">.1e</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;x position / m&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;y position / m&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">orientation</span><span class="o">=</span><span class="s1">&#39;horizontal&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;time / s&#39;</span> <span class="p">);</span>

<span class="c1"># save output to file</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;figs/appartment_aset_map.svg&#39;</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<figure class="align-default" id="fig-example-dataanalysis2-aset-map">
<a class="reference internal image-reference" href="../../../_images/appartment_aset_map.svg"><img alt="../../../_images/appartment_aset_map.svg" src="../../../_images/appartment_aset_map.svg" width="100%" /></a>
<figcaption>
<p><span class="caption-number">Fig. 5 </span><span class="caption-text">ASET map for the outlined scenario.</span><a class="headerlink" href="#fig-example-dataanalysis2-aset-map" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="smoke-layer">
<h2>Smoke layer<a class="headerlink" href="#smoke-layer" title="Permalink to this heading">#</a></h2>
<p>In this example, the smoke layer height is analysed. The distinction made here is based on a simple threshold in temperature: The local smoke layer height is given by the lowest point above a given temperature. The evaluation is done based on a slice across the burner and normal to the x-direction.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># find the slice</span>
<span class="n">slc</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">slices</span><span class="o">.</span><span class="n">get_by_id</span><span class="p">(</span><span class="s1">&#39;BurnerTempX&#39;</span><span class="p">)</span>

<span class="c1"># convert it to a global data structure and get the coordinates</span>
<span class="n">slc_data</span><span class="p">,</span> <span class="n">slc_coords</span> <span class="o">=</span> <span class="n">slc</span><span class="o">.</span><span class="n">to_global</span><span class="p">(</span><span class="n">masked</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">return_coordinates</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>First, the data at a arbitrary point in time is visualsied. The white parts represent the obsticles.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># pick a time index</span>
<span class="n">it</span> <span class="o">=</span> <span class="n">slc</span><span class="o">.</span><span class="n">get_nearest_timestep</span><span class="p">(</span><span class="mi">150</span><span class="p">)</span>

<span class="c1"># visualise the data</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">slc_data</span><span class="p">[</span><span class="n">it</span><span class="p">,:,:]</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s1">&#39;lower&#39;</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">extent</span><span class="o">=</span><span class="n">slc</span><span class="o">.</span><span class="n">extent</span><span class="o">.</span><span class="n">as_list</span><span class="p">())</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Temperature at t=</span><span class="si">{</span><span class="n">slc</span><span class="o">.</span><span class="n">times</span><span class="p">[</span><span class="n">it</span><span class="p">]</span><span class="si">:</span><span class="s1">.2f</span><span class="si">}</span><span class="s1">s&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;y position / m&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;z position / m&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">orientation</span><span class="o">=</span><span class="s1">&#39;horizontal&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">slc</span><span class="o">.</span><span class="n">quantity</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1"> / </span><span class="si">{</span><span class="n">slc</span><span class="o">.</span><span class="n">quantity</span><span class="o">.</span><span class="n">unit</span><span class="si">}</span><span class="s1">&#39;</span> <span class="p">)</span>

<span class="c1"># save output to file</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;figs/appartment_temp_slice.svg&#39;</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<figure class="align-default" id="fig-example-dataanalysis2-smoke-temp-slice">
<a class="reference internal image-reference" href="../../../_images/appartment_temp_slice.svg"><img alt="../../../_images/appartment_temp_slice.svg" src="../../../_images/appartment_temp_slice.svg" width="100%" /></a>
<figcaption>
<p><span class="caption-number">Fig. 6 </span><span class="caption-text">Temperature slice across the burner.</span><a class="headerlink" href="#fig-example-dataanalysis2-smoke-temp-slice" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>Now, for each y-position the z-indices are found, where the temperature exceedes the limit temperature. The lowest value is the smoke layer height at the y-position.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># set temperature limit</span>
<span class="n">temperature_limit</span> <span class="o">=</span> <span class="mi">75</span>

<span class="c1"># create a data array to store the local height values, default </span>
<span class="c1"># is the maximal z-coordinate</span>
<span class="n">layer_height</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">full</span><span class="p">(</span><span class="n">slc_data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">slc_coords</span><span class="p">[</span><span class="s1">&#39;z&#39;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>

<span class="c1"># loop over all indices</span>
<span class="k">for</span> <span class="n">ix</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">layer_height</span><span class="p">)):</span>
    <span class="c1"># find indices which exceed the limit</span>
    <span class="n">lt</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">slc_data</span><span class="p">[</span><span class="n">it</span><span class="p">,</span> <span class="n">ix</span><span class="p">,</span> <span class="p">:]</span> <span class="o">&gt;</span> <span class="n">temperature_limit</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="c1"># if there are any, pick the lowest one</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">lt</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">layer_height</span><span class="p">[</span><span class="n">ix</span><span class="p">]</span> <span class="o">=</span> <span class="n">slc_coords</span><span class="p">[</span><span class="s1">&#39;z&#39;</span><span class="p">][</span><span class="n">lt</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
</pre></div>
</div>
</div>
</div>
<p>The resulting values can now be plotted over the slice file, to check for plausibility.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># slice data</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">slc_data</span><span class="p">[</span><span class="n">it</span><span class="p">,:,:]</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s1">&#39;lower&#39;</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">extent</span><span class="o">=</span><span class="n">slc</span><span class="o">.</span><span class="n">extent</span><span class="o">.</span><span class="n">as_list</span><span class="p">())</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Temperature at t=</span><span class="si">{</span><span class="n">slc</span><span class="o">.</span><span class="n">times</span><span class="p">[</span><span class="n">it</span><span class="p">]</span><span class="si">:</span><span class="s1">.2f</span><span class="si">}</span><span class="s1">s&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;y position / m&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;z position / m&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">orientation</span><span class="o">=</span><span class="s1">&#39;horizontal&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">slc</span><span class="o">.</span><span class="n">quantity</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1"> / </span><span class="si">{</span><span class="n">slc</span><span class="o">.</span><span class="n">quantity</span><span class="o">.</span><span class="n">unit</span><span class="si">}</span><span class="s1">&#39;</span> <span class="p">);</span>

<span class="c1"># smoke layer height</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">slc_coords</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">],</span> <span class="n">layer_height</span><span class="p">,</span> <span class="s1">&#39;.-&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">)</span>

<span class="c1"># save output to file</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;figs/appartment_temp_slice_height.svg&#39;</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<figure class="align-default" id="fig-example-dataanalysis2-smoke-temp-slice-height">
<a class="reference internal image-reference" href="../../../_images/appartment_temp_slice_height.svg"><img alt="../../../_images/appartment_temp_slice_height.svg" src="../../../_images/appartment_temp_slice_height.svg" width="100%" /></a>
<figcaption>
<p><span class="caption-number">Fig. 7 </span><span class="caption-text">Temperature slice with the local smoke layer height.</span><a class="headerlink" href="#fig-example-dataanalysis2-smoke-temp-slice-height" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>Using the above approach for a single point in time, a loop over all times can be used to compute, e.g., the mean and standard deviation of the smoke layer height.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">layer_mean</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">slc</span><span class="o">.</span><span class="n">times</span><span class="p">)</span>
<span class="n">layer_stddev</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">slc</span><span class="o">.</span><span class="n">times</span><span class="p">)</span>

<span class="n">res</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">slc_data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

<span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">slc</span><span class="o">.</span><span class="n">times</span><span class="p">)):</span>

    <span class="n">res</span><span class="p">[:]</span> <span class="o">=</span> <span class="n">slc_coords</span><span class="p">[</span><span class="s1">&#39;z&#39;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

    <span class="k">for</span> <span class="n">ix</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">res</span><span class="p">)):</span>
        <span class="n">lt</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">slc_data</span><span class="p">[</span><span class="n">it</span><span class="p">,</span> <span class="n">ix</span><span class="p">,</span> <span class="p">:]</span> <span class="o">&gt;</span> <span class="n">temperature_limit</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">lt</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">res</span><span class="p">[</span><span class="n">ix</span><span class="p">]</span> <span class="o">=</span> <span class="n">slc_coords</span><span class="p">[</span><span class="s1">&#39;z&#39;</span><span class="p">][</span><span class="n">lt</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
            
    <span class="n">layer_mean</span><span class="p">[</span><span class="n">it</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
    <span class="n">layer_stddev</span><span class="p">[</span><span class="n">it</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># plot the mean and stddev values as functions of time</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">slc</span><span class="o">.</span><span class="n">times</span><span class="p">,</span> <span class="n">layer_mean</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Mean Smoke Layer Height&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">slc</span><span class="o">.</span><span class="n">times</span><span class="p">,</span> <span class="n">layer_stddev</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Stddev of Smoke Layer Height&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Time / s&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Height / m&#39;</span><span class="p">)</span>

<span class="c1"># save output to file</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;figs/appartment_layer_mean_stddev.svg&#39;</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0, 0.5, &#39;Height / m&#39;)
</pre></div>
</div>
<img alt="../../../_images/1f936196139b723770b02ca61d3686e99488cdce18e064ebc4facf649bcf7cf0.png" src="../../../_images/1f936196139b723770b02ca61d3686e99488cdce18e064ebc4facf649bcf7cf0.png" />
</div>
</div>
<!-- :::{figure-md} fig-example-dataanalysis2-layer-mean-stddev

<img src="figs/appartment_layer_mean_stddev.svg" width="100%">

Temporal development of the mean and stdandard deviation of the smoke layer height.
::: --><p>Both values can be combined and visualised jointly, where the standard deviation is used to indicate a fluctuation band around the mean value.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># plot the mean</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">slc</span><span class="o">.</span><span class="n">times</span><span class="p">,</span> <span class="n">layer_mean</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Mean Smoke Layer Height&#39;</span><span class="p">)</span>

<span class="c1"># plot a band around the mean, using the stddev as band borders</span>
<span class="n">plt</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span><span class="n">slc</span><span class="o">.</span><span class="n">times</span><span class="p">,</span> <span class="n">layer_mean</span><span class="o">-</span><span class="n">layer_stddev</span><span class="p">,</span> <span class="n">layer_mean</span><span class="o">+</span><span class="n">layer_stddev</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;C0&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>

<span class="c1"># show the floor for reference</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Time / s&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Height / m&#39;</span><span class="p">)</span>

<span class="c1"># save output to file</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;figs/appartment_layer_mean_band.svg&#39;</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<figure class="align-default" id="fig-example-dataanalysis2-layer-mean-band">
<a class="reference internal image-reference" href="../../../_images/appartment_layer_mean_band.svg"><img alt="../../../_images/appartment_layer_mean_band.svg" src="../../../_images/appartment_layer_mean_band.svg" width="100%" /></a>
<figcaption>
<p><span class="caption-number">Fig. 8 </span><span class="caption-text">Temporal development of the mean and stdandard deviation of the smoke layer height.</span><a class="headerlink" href="#fig-example-dataanalysis2-layer-mean-band" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>If parts of the region shall be excluded in the analysis, a coordinate dependent mask can be used for this.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># find indices, where the y coordinate is between the given values</span>
<span class="n">ymin</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">ymax</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">coord_mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">((</span><span class="n">slc_coords</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">ymin</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">slc_coords</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">ymax</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># slice data</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">slc_data</span><span class="p">[</span><span class="n">it</span><span class="p">,:,:]</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s1">&#39;lower&#39;</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">extent</span><span class="o">=</span><span class="n">slc</span><span class="o">.</span><span class="n">extent</span><span class="o">.</span><span class="n">as_list</span><span class="p">())</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Temperature at t=</span><span class="si">{</span><span class="n">slc</span><span class="o">.</span><span class="n">times</span><span class="p">[</span><span class="n">it</span><span class="p">]</span><span class="si">:</span><span class="s1">.2f</span><span class="si">}</span><span class="s1">s&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;y position / m&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;z position / m&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">orientation</span><span class="o">=</span><span class="s1">&#39;horizontal&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">slc</span><span class="o">.</span><span class="n">quantity</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1"> / </span><span class="si">{</span><span class="n">slc</span><span class="o">.</span><span class="n">quantity</span><span class="o">.</span><span class="n">unit</span><span class="si">}</span><span class="s1">&#39;</span> <span class="p">);</span>

<span class="c1"># smoke layer height</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">slc_coords</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">][</span><span class="n">coord_mask</span><span class="p">],</span> <span class="n">layer_height</span><span class="p">[</span><span class="n">coord_mask</span><span class="p">],</span> <span class="s1">&#39;.-&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">)</span>

<span class="c1"># save output to file</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;figs/appartment_temp_slice_height_mask.svg&#39;</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<figure class="align-default" id="fig-example-dataanalysis2-smoke-temp-slice-height-mask">
<a class="reference internal image-reference" href="../../../_images/appartment_temp_slice_height_mask.svg"><img alt="../../../_images/appartment_temp_slice_height_mask.svg" src="../../../_images/appartment_temp_slice_height_mask.svg" width="100%" /></a>
<figcaption>
<p><span class="caption-number">Fig. 9 </span><span class="caption-text">Temperature slice with the local smoke layer height, limited to the masked region.</span><a class="headerlink" href="#fig-example-dataanalysis2-smoke-temp-slice-height-mask" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>The above procedure can be reused, yet the computation of the mean and standard deviation is carried out on the masked values.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">it</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">slc</span><span class="o">.</span><span class="n">times</span><span class="p">)):</span>

    <span class="n">res</span><span class="p">[:]</span> <span class="o">=</span> <span class="n">slc_coords</span><span class="p">[</span><span class="s1">&#39;z&#39;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

    <span class="k">for</span> <span class="n">ix</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">ndindex</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">shape</span><span class="p">):</span>
        <span class="n">lt</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">slc_data</span><span class="p">[</span><span class="n">it</span><span class="p">,</span> <span class="n">ix</span><span class="p">,</span> <span class="p">:]</span> <span class="o">&gt;</span> <span class="n">temperature_limit</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">lt</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">res</span><span class="p">[</span><span class="n">ix</span><span class="p">]</span> <span class="o">=</span> <span class="n">slc_coords</span><span class="p">[</span><span class="s1">&#39;z&#39;</span><span class="p">][</span><span class="n">lt</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
    
    <span class="c1"># computation is carried out on the masked values now</span>
    <span class="n">layer_mean</span><span class="p">[</span><span class="n">it</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="n">coord_mask</span><span class="p">])</span>
    <span class="n">layer_stddev</span><span class="p">[</span><span class="n">it</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="n">coord_mask</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># same plot as above</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">slc</span><span class="o">.</span><span class="n">times</span><span class="p">,</span> <span class="n">layer_mean</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Mean Smoke Layer Height&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span><span class="n">slc</span><span class="o">.</span><span class="n">times</span><span class="p">,</span> <span class="n">layer_mean</span><span class="o">-</span><span class="n">layer_stddev</span><span class="p">,</span> <span class="n">layer_mean</span><span class="o">+</span><span class="n">layer_stddev</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;C0&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Time / s&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Height / m&#39;</span><span class="p">)</span>

<span class="c1"># save output to file</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;figs/appartment_layer_mean_band_mask.svg&#39;</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<figure class="align-default" id="fig-example-dataanalysis2-layer-mean-band-mask">
<a class="reference internal image-reference" href="../../../_images/appartment_layer_mean_band_mask.svg"><img alt="../../../_images/appartment_layer_mean_band_mask.svg" src="../../../_images/appartment_layer_mean_band_mask.svg" width="100%" /></a>
<figcaption>
<p><span class="caption-number">Fig. 10 </span><span class="caption-text">Temporal development of the mean and stdandard deviation of the smoke layer height in the masked region.</span><a class="headerlink" href="#fig-example-dataanalysis2-layer-mean-band-mask" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./content/examples/02_intermediate"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="04_repeated_sim_exec.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Repetitive Execution of Scripts</p>
      </div>
    </a>
    <a class="right-next"
       href="06_build_fds_input.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Build FDS Input Lines Using Python String Manipulation</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#aset-map">ASET Map</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#smoke-layer">Smoke layer</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
<div class="extra_footer">
  <p>
<img src='https://mirrors.creativecommons.org/presskit/buttons/88x31/svg/by-sa.svg' height='31'/>
| By Team Fire | Contacts and Infos: <a href='https://cce.uni-wuppertal.de/en.html'>CCE@BUW</a> and <a href='https://www.fz-juelich.de/ias/ias-7/EN/Research/Fire_Dynamics/_node.html'>IAS-7@FZJ</a>
</br>Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</p>

</div>
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>