
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>3.3. Example – Pool Fire &#8212; Fire Simulation &lt;br&gt; Lecture Notes</title>
    
  <link href="../../../_static/css/theme.css" rel="stylesheet" />
  <link href="../../../_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/sphinx-book-theme.acff12b8f9c144ce68a297486a2fa670.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../../_static/js/index.1c5a1a01449ed65a7b51.js">

    <script id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/togglebutton.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../../../_static/sphinx-thebe.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"TeX": {"Macros": {"vv": "\\vec{v}", "vu": "\\vec{u}", "mf": "\\small\\sf", "dQ": "\\dot{Q}", "dq": "\\dot{q}", "dm": "\\dot{m}", "du": "\\dot{u}"}}, "tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <link rel="canonical" href="https://firedynamics.github.io/LectureFireSimulation/content/modelling/03_compartments/03_example.html" />
    <link rel="shortcut icon" href="../../../_static/cce_logo_standalone_icon.png"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="3.4. Example - Steckler Compartment" href="04_steckler.html" />
    <link rel="prev" title="3.2. Design Fires" href="02_design_fire.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../../index.html">
      
      <img src="../../../_static/cce_logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Fire Simulation <br> Lecture Notes</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../overview/01_overview.html">
   Overview
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Introduction
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../overview/02_team.html">
   Team Fire Dynamics
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../overview/03_references.html">
   References
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Modelling
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../01_general/00_overview.html">
   1. Modelling Fires
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../01_general/01_processes.html">
     1.1. Physical and Chemical Processes
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01_general/02_fse.html">
     1.2. Fire Safety Engineering
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01_general/03_approaches.html">
     1.3. Modelling Approaches
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../02_fluids/00_overview.html">
   2. Fluid Dynamics
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../02_fluids/01_fluids.html">
     2.1. Fluids
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02_fluids/02_cfd.html">
     2.2. Computational Fluid Dynamics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02_fluids/03_turbulence.html">
     2.3. Turbulence
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="00_overview.html">
   3. Compartment Fires
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="01_fundamentals.html">
     3.1. Fundamentals
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="02_design_fire.html">
     3.2. Design Fires
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     3.3. Example – Pool Fire
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="04_steckler.html">
     3.4. Example - Steckler Compartment
    </a>
   </li>
  </ul>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Tools
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../tools/01_fds_smv/00_overview.html">
   FDS and SMV
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../tools/01_fds_smv/01_fds_intro.html">
     FDS Overview
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../tools/01_fds_smv/02_fds_tutorial.html">
     FDS Basic Example
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../tools/01_fds_smv/02_smv.html">
     Smokeview Basics
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../tools/02_hpc/00_overview.html">
   HPC
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../tools/02_hpc/01_linux.html">
     Linux
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../tools/02_hpc/02_hpc.html">
     High Performace Computing
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../tools/02_hpc/03_parallel_fds.html">
     Parallel Execution of FDS
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../tools/02_hpc/04_benchmarking.html">
     Benchmarking
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../tools/03_analysis/00_overview.html">
   Data Analysis
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../tools/03_analysis/01_python.html">
     Python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../tools/03_analysis/02_fdsreader.html">
     fdsreader Module
    </a>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../../_sources/content/modelling/03_compartments/03_example.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/FireDynamics/LectureFireSimulation"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/FireDynamics/LectureFireSimulation/issues/new?title=Issue%20on%20page%20%2Fcontent/modelling/03_compartments/03_example.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        <a class="edit-button" href="https://github.com/FireDynamics/LectureFireSimulation/edit/main/book/content/modelling/03_compartments/03_example.ipynb"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/FireDynamics/LectureFireSimulation/main?urlpath=tree/book/content/modelling/03_compartments/03_example.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../../../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        <a class="jupyterhub-button" href="https://io.cce.uni-wuppertal.de/firesim_ss21//hub/user-redirect/git-pull?repo=https://github.com/FireDynamics/LectureFireSimulation&urlpath=tree/LectureFireSimulation/book/content/modelling/03_compartments/03_example.ipynb&branch=main"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch JupyterHub" data-toggle="tooltip"
                data-placement="left"><img class="jupyterhub-button-logo"
                    src="../../../_static/images/logo_jupyterhub.svg"
                    alt="Interact on JupyterHub">JupyterHub</button></a>
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#introduction">
   Introduction
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#setup">
   Setup
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#fds-input-file">
   FDS Input File
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#smv-visualisation">
   SMV Visualisation
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#analysis">
   Analysis
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#task-i-basics">
   Task I – Basics
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#task-ii-plume-formulas">
   Task II - Plume Formulas
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#task-iii-time-dependent-heat-release-rate">
   Task III – Time-dependent Heat Release Rate
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#task-iv-grid-convergence-hpc-computing-benchmarking">
   Task IV – Grid Convergence / HPC computing / Benchmarking
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="example-pool-fire">
<h1><span class="section-number">3.3. </span>Example – Pool Fire<a class="headerlink" href="#example-pool-fire" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>This example illustrates the setup and analysis of a minimalist FDS simulation. Starting from a simple pool fire with a fixed heat release rate, the model is extended by various parameters. The results are then validated by comparison with simple analytical methods.</p>
</div>
<div class="section" id="setup">
<h2>Setup<a class="headerlink" href="#setup" title="Permalink to this headline">¶</a></h2>
<p>The scenario is a pool fire with a heat release rate of <span class="math notranslate nohighlight">\(\small\sf 1~MW\)</span> and a surface area of <span class="math notranslate nohighlight">\(\small\sf 1~m^2\)</span> located centrally at the floor at <span class="math notranslate nohighlight">\(\small\sf z=0~m\)</span>. The extension of the computational domain is</p>
<div class="math notranslate nohighlight">
\[\small\sf [-2.5~m, 2.5~m] \times [-2.5~m, 2.5~m] \times [0~m, 10~m]\]</div>
<p>with a grid resolution of <span class="math notranslate nohighlight">\(\small\sf 0.2~m\)</span>.</p>
</div>
<div class="section" id="fds-input-file">
<h2>FDS Input File<a class="headerlink" href="#fds-input-file" title="Permalink to this headline">¶</a></h2>
<p>Parameters in the FDS input file are specified by using namelist formatted records. Each namelist record begins with the ampersand character, &amp;, followed by the name of the namelist group, then a comma-delimited list of the input parameters, and finally a forward slash /.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Table 21.3 in the <a class="reference external" href="https://github.com/firemodels/fds/releases/download/FDS6.7.5/FDS_User_Guide.pdf">FDS User’s Guide</a> provides a summary of frequently used output quantities.</p>
</div>
<p>A simple and commented input file that can serve as a starting point for the following exercise looks like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;--------------------------------------------------------------------------------------------&quot;</span>
<span class="s2">&quot;Output files will be tagged with &#39;pool_fire&#39;, &#39;TITLE&#39; is just an description&quot;</span>
<span class="s2">&quot;--------------------------------------------------------------------------------------------&quot;</span>
<span class="n">CHID</span> <span class="o">=</span> <span class="s1">&#39;pool_fire&#39;</span><span class="p">,</span> <span class="n">TITLE</span> <span class="o">=</span> <span class="s1">&#39;Example of a pool fire&#39;</span>  <span class="o">/</span>

<span class="s2">&quot;--------------------------------------------------------------------------------------------&quot;</span>
<span class="s2">&quot;Mesh with 25/25/50 cells in X/Y/Z axes that extends from X/Y/Z = -2.5/-2.5/0 to 2.5/2.5/10 m&quot;</span>
<span class="s2">&quot;--------------------------------------------------------------------------------------------&quot;</span>
<span class="o">&amp;</span><span class="n">MESH</span> <span class="n">IJK</span> <span class="o">=</span> <span class="mi">25</span><span class="p">,</span><span class="mi">25</span><span class="p">,</span><span class="mi">50</span><span class="p">,</span> <span class="n">XB</span> <span class="o">=</span> <span class="o">-</span><span class="mf">2.5</span><span class="p">,</span><span class="mf">2.5</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.5</span><span class="p">,</span><span class="mf">2.5</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span><span class="mi">10</span> <span class="o">/</span>

<span class="s2">&quot;--------------------------------------------------------------------------------------------&quot;</span>
<span class="s2">&quot;End of simulation time is 30 s&quot;</span>
<span class="s2">&quot;--------------------------------------------------------------------------------------------&quot;</span>
<span class="o">&amp;</span><span class="n">TIME</span> <span class="n">T_END</span> <span class="o">=</span> <span class="mf">30.0</span> <span class="o">/</span> <span class="n">End</span> <span class="n">of</span> <span class="n">simulation</span> <span class="n">time</span> <span class="ow">is</span> <span class="mi">30</span> <span class="n">s</span>

<span class="s2">&quot;--------------------------------------------------------------------------------------------&quot;</span>
<span class="s2">&quot;Specifying FDS default fuel &#39;METHANE&#39; for the reaction&quot;</span>
<span class="s2">&quot;--------------------------------------------------------------------------------------------&quot;</span>
<span class="o">&amp;</span><span class="n">REAC</span> <span class="n">FUEL</span> <span class="o">=</span> <span class="s1">&#39;METHANE&#39;</span> <span class="o">/</span>

<span class="s2">&quot;--------------------------------------------------------------------------------------------&quot;</span>
<span class="s2">&quot;Surface &#39;BURNER&#39; with a heat release rate of 1000 kW/m^2&quot;</span>
<span class="s2">&quot;--------------------------------------------------------------------------------------------&quot;</span>
<span class="o">&amp;</span><span class="n">SURF</span> <span class="n">ID</span> <span class="o">=</span> <span class="s1">&#39;BURNER&#39;</span><span class="p">,</span> <span class="n">HRRPUA</span> <span class="o">=</span> <span class="mf">1000.</span><span class="p">,</span> <span class="n">COLOR</span> <span class="o">=</span> <span class="s1">&#39;RASPBERRY&#39;</span> <span class="o">/</span> <span class="n">Surface</span> <span class="k">with</span> <span class="n">ID</span> <span class="o">/</span>

<span class="s2">&quot;--------------------------------------------------------------------------------------------&quot;</span>
<span class="s2">&quot;Vent in the X-Y plane at Z = 0 that extends from X/Y = -0.5/-0.5 to 0.5/0.5&quot;</span>
<span class="s2">&quot;Surface &#39;BURNER&#39; is assigned to the vent&quot;</span>
<span class="s2">&quot;--------------------------------------------------------------------------------------------&quot;</span>
<span class="o">&amp;</span><span class="n">VENT</span> <span class="n">XB</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.5</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">SURF_ID</span><span class="o">=</span><span class="s1">&#39;BURNER&#39;</span><span class="o">/</span>

<span class="s2">&quot;--------------------------------------------------------------------------------------------&quot;</span>
<span class="s2">&quot;Slice file in the Y-Z plane at X = 0 with quantity &#39;temperature&#39;&quot;</span>
<span class="s2">&quot;CELL_CENTERED prevents FDS from interpolating the results to the cell corners&quot;</span>
<span class="s2">&quot;--------------------------------------------------------------------------------------------&quot;</span>
<span class="o">&amp;</span><span class="n">SLCF</span> <span class="n">PBX</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">QUANTITY</span> <span class="o">=</span> <span class="s1">&#39;TEMPERATURE&#39;</span><span class="p">,</span> <span class="n">CELL_CENTERED</span> <span class="o">=</span> <span class="o">.</span><span class="n">TRUE</span><span class="o">.</span> <span class="o">/</span>

<span class="s2">&quot;--------------------------------------------------------------------------------------------&quot;</span>
<span class="s2">&quot;FDS does not look after this line&quot;</span>
<span class="s2">&quot;--------------------------------------------------------------------------------------------&quot;</span>
<span class="o">&amp;</span><span class="n">TAIL</span> <span class="o">/</span>
</pre></div>
</div>
</div>
<div class="section" id="smv-visualisation">
<h2>SMV Visualisation<a class="headerlink" href="#smv-visualisation" title="Permalink to this headline">¶</a></h2>
<p>The computational domain including boundary conditions, obstructions and the results for the respective output variables of the FDS simulation can be displayed with the Smokeview post-processor.</p>
<div class="figure align-default" id="fig-pool-fire-smv-plain">
<a class="reference internal image-reference" href="../../../_images/pool_fire_all.png"><img alt="../../../_images/pool_fire_all.png" src="../../../_images/pool_fire_all.png" style="width: 100%;" /></a>
<p class="caption"><span class="caption-number">Fig. 3.3 </span><span class="caption-text">SMV visualization of the geometry / the mesh-grid in the y-z-plane / the temperature values in the y-z-slice at  <span class="math notranslate nohighlight">\(\sf y=0~m\)</span> (<span class="math notranslate nohighlight">\(\sf t=19.63~s\)</span>). The surface patch <code class="docutils literal notranslate"><span class="pre">BURNER</span></code>, which has a <code class="docutils literal notranslate"><span class="pre">HRRPUA</span></code> defined, is colored redish.</span><a class="headerlink" href="#fig-pool-fire-smv-plain" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="analysis">
<h2>Analysis<a class="headerlink" href="#analysis" title="Permalink to this headline">¶</a></h2>
<p>The following tasks are intended to provide a general understanding of how to use FDS and SmokeView. They cover the basic functions and the analysis of the simulation results. The FDS input case described above can serve as a starting point.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Read the entire task before starting a simulation to capture multiple output parameters in a single run.</p>
</div>
</div>
<div class="section" id="task-i-basics">
<h2>Task I – Basics<a class="headerlink" href="#task-i-basics" title="Permalink to this headline">¶</a></h2>
<p>The goal of this task is to become familiar with basic functions. Use the above listed input file and extend it to your needs.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>When adding new diagnostics or other elements, it is useful to reduce the computing time to allow for a fast turn-over-time. This way debugging or adjusting your setup will be more efficient. For pure geometrical checks, the simulation time can also be set to zero.</p>
</div>
<p><strong>Task:</strong></p>
<ol class="simple">
<li><p>Add a temperature slice at <span class="math notranslate nohighlight">\(\small\sf y=0~m\)</span> and watch the output via smokeview. Change the output by varying the color scaling and crop the data at an upper and lower boundary. Create snapshots for three points in time, e.g. <span class="math notranslate nohighlight">\(\small\sf 5~s\)</span>, <span class="math notranslate nohighlight">\(\small\sf 10~s\)</span> and <span class="math notranslate nohighlight">\(\small\sf 20~s\)</span>. Add appropriate axes labels to the smokeview output to check the slice orientation. Refer to section 5.2 “Data Bounds” and 14.4 “TICKS and LABEL keywords” of <a class="reference external" href="https://github.com/firemodels/fds/releases/download/FDS6.7.6/SMV_User_Guide.pdf">Smokeview User’s Guide</a> for more information on how to change the output properties of slices.</p></li>
<li><p>Visualize the velocity vector field in the plume axis at <span class="math notranslate nohighlight">\(\small\sf t \approx 20~s\)</span> for <span class="math notranslate nohighlight">\(\small\sf y=0~m\)</span>.</p>
<ul class="simple">
<li><p>Extra task: Open the sealed domain on at least one side and observe the change in the flow field.</p></li>
</ul>
</li>
<li><p>Plot the computed heat release rate (HRR) from the pool_fire_hrr.csv file against the given input HRR of the FDS file. Discuss the differences and what these are related to. Run simulations for HRR of <span class="math notranslate nohighlight">\(\small\sf 100~kW\)</span>, <span class="math notranslate nohighlight">\(\small\sf 1~MW\)</span> and <span class="math notranslate nohighlight">\(\small\sf 10~MW\)</span>.</p></li>
</ol>
<p><strong>1. Solution</strong></p>
<div class="figure align-default" id="fig-pool-fire-temp-timesteps">
<a class="reference internal image-reference" href="../../../_images/pool_fire_temp_timesteps.png"><img alt="../../../_images/pool_fire_temp_timesteps.png" src="../../../_images/pool_fire_temp_timesteps.png" style="width: 100%;" /></a>
<p class="caption"><span class="caption-number">Fig. 3.4 </span><span class="caption-text">Visualization of the instantaneous <code class="docutils literal notranslate"><span class="pre">TEMPERATURE</span></code> values in the x-z-level at <span class="math notranslate nohighlight">\(\sf y=0~m\)</span> for different timesteps (<span class="math notranslate nohighlight">\(\sf t=5.03~s\)</span>), (<span class="math notranslate nohighlight">\(\sf t=10.03~s\)</span>), (<span class="math notranslate nohighlight">\(\sf t=20.03~s\)</span>) The attribute <code class="docutils literal notranslate"><span class="pre">CELL_CENTERED</span></code>, prevents the values between the cell boundaries from being interpolated.</span><a class="headerlink" href="#fig-pool-fire-temp-timesteps" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-default" id="fig-pool-fire-temp-bounds-trunc">
<a class="reference internal image-reference" href="../../../_images/pool_fire_temp_bounds_trunc.png"><img alt="../../../_images/pool_fire_temp_bounds_trunc.png" src="../../../_images/pool_fire_temp_bounds_trunc.png" style="width: 100%;" /></a>
<p class="caption"><span class="caption-number">Fig. 3.5 </span><span class="caption-text">Visualization of the instantaneous <code class="docutils literal notranslate"><span class="pre">TEMPERATURE</span></code> values in the x-z-slice at <span class="math notranslate nohighlight">\(\sf y=0~m\)</span> at (<span class="math notranslate nohighlight">\(\sf t=19.63~s\)</span>) The upper data bound is set to 1200 and 800. The data is truncated beyond 100.</span><a class="headerlink" href="#fig-pool-fire-temp-bounds-trunc" title="Permalink to this image">¶</a></p>
</div>
<p>Alternatively, the <code class="docutils literal notranslate"><span class="pre">SLCF</span></code> can be analyzed with the <strong>fdsreader</strong>.</p>
<div class="cell tag_hide_cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fdsreader</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;lines.linewidth&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
<span class="c1"># plt.rcParams[&#39;figure.dpi&#39;] = 150</span>
<span class="c1"># plt.rcParams.update({</span>
<span class="c1">#     &quot;text.usetex&quot;: True,</span>
<span class="c1">#     &quot;font.family&quot;: &quot;sans-serif&quot;,</span>
<span class="c1">#     &quot;font.sans-serif&quot;: [&quot;Helvetica&quot;]})</span>

<span class="n">root</span> <span class="o">=</span> <span class="s1">&#39;../../../../&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell tag_hide_cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data_root</span> <span class="o">=</span> <span class="n">root</span> <span class="o">+</span> <span class="s1">&#39;data/pool_fire/1mw_sealed&#39;</span>
<span class="n">sim</span> <span class="o">=</span> <span class="n">fdsreader</span><span class="o">.</span><span class="n">Simulation</span><span class="p">(</span><span class="n">data_root</span><span class="p">)</span>
<span class="n">slice_temp</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">slices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">time</span> <span class="o">=</span> <span class="mi">20</span>
<span class="n">time_index</span> <span class="o">=</span> <span class="n">slice_temp</span><span class="o">.</span><span class="n">get_nearest_timestep</span><span class="p">(</span><span class="n">time</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">slice_temp</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">time_index</span><span class="p">]</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s1">&#39;lower&#39;</span><span class="p">,</span> 
           <span class="n">extent</span><span class="o">=</span><span class="n">slice_temp</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">extent</span><span class="o">.</span><span class="n">as_list</span><span class="p">(),</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;jet&#39;</span><span class="p">,</span>
           <span class="n">vmin</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">1200</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;X / m&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Z / m&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;Temperature / $\sf ^\circ C$&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;figs/pool_fire_1mw_temperatures_slice.svg&#39;</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="figure align-default" id="fig-pool-fire-temp-slice">
<a class="reference internal image-reference" href="../../../_images/pool_fire_1mw_temperatures_slice.svg"><img alt="../../../_images/pool_fire_1mw_temperatures_slice.svg" src="../../../_images/pool_fire_1mw_temperatures_slice.svg" width="60%" /></a>
<p class="caption"><span class="caption-number">Fig. 3.6 </span><span class="caption-text">Visualization of the instantaneous (<span class="math notranslate nohighlight">\(\sf t=19.63~s\)</span>) <code class="docutils literal notranslate"><span class="pre">TEMPERATURE</span></code> values in the y-z-slice <span class="math notranslate nohighlight">\(\sf y=0~m\)</span> with python / matplotlib. The data was obtained via the <strong>fdsreader</strong>.</span><a class="headerlink" href="#fig-pool-fire-temp-slice" title="Permalink to this image">¶</a></p>
</div>
<div class="cell tag_hide_cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">fdsreader.bndf.utils</span> <span class="kn">import</span> <span class="n">sort_patches_cartesian</span>
<span class="n">data_root</span> <span class="o">=</span> <span class="n">root</span> <span class="o">+</span> <span class="s1">&#39;data/pool_fire/bndf&#39;</span>
<span class="n">sim</span> <span class="o">=</span> <span class="n">fdsreader</span><span class="o">.</span><span class="n">Simulation</span><span class="p">(</span><span class="n">data_root</span><span class="p">)</span>
<span class="n">obst</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">obstructions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="n">orientation</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
<span class="n">quantity</span> <span class="o">=</span> <span class="s2">&quot;AST&quot;</span>
<span class="n">patches</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
<span class="k">for</span> <span class="n">sub_obst</span> <span class="ow">in</span> <span class="n">obst</span><span class="o">.</span><span class="n">filter_by_orientation</span><span class="p">(</span><span class="n">orientation</span><span class="p">):</span>
    <span class="c1"># Get boundary data for a specific quantity</span>
    <span class="n">sub_obst_data</span> <span class="o">=</span> <span class="n">sub_obst</span><span class="o">.</span><span class="n">get_data</span><span class="p">(</span><span class="n">quantity</span><span class="p">)</span>
    <span class="n">patches</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sub_obst_data</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">orientation</span><span class="p">])</span>

<span class="c1"># Combine patches to a single face for plotting</span>
<span class="n">patches</span> <span class="o">=</span> <span class="n">sort_patches_cartesian</span><span class="p">(</span><span class="n">patches</span><span class="p">)</span>

<span class="n">shape_dim1</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">patch_row</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">patch_row</span> <span class="ow">in</span> <span class="n">patches</span><span class="p">])</span>
<span class="n">shape_dim2</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">patch</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">patch</span> <span class="ow">in</span> <span class="n">patches</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span>
<span class="n">n_t</span> <span class="o">=</span> <span class="n">patches</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">n_t</span>  <span class="c1"># Number of timesteps</span>

<span class="n">face</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="n">n_t</span><span class="p">,</span> <span class="n">shape_dim1</span><span class="p">,</span> <span class="n">shape_dim2</span><span class="p">))</span>
<span class="n">dim1_pos</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">dim2_pos</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">patch_row</span> <span class="ow">in</span> <span class="n">patches</span><span class="p">:</span>
    <span class="n">d1</span> <span class="o">=</span> <span class="n">patch_row</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">patch</span> <span class="ow">in</span> <span class="n">patch_row</span><span class="p">:</span>
        <span class="n">d2</span> <span class="o">=</span> <span class="n">patch</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">face</span><span class="p">[:,</span> <span class="n">dim1_pos</span><span class="p">:</span><span class="n">dim1_pos</span> <span class="o">+</span> <span class="n">d1</span><span class="p">,</span>
        <span class="n">dim2_pos</span><span class="p">:</span><span class="n">dim2_pos</span> <span class="o">+</span> <span class="n">d2</span><span class="p">]</span> <span class="o">=</span> <span class="n">patch</span><span class="o">.</span><span class="n">data</span>
        <span class="n">dim2_pos</span> <span class="o">+=</span> <span class="n">d2</span>
    <span class="n">dim1_pos</span> <span class="o">+=</span> <span class="n">d1</span>
    <span class="n">dim2_pos</span> <span class="o">=</span> <span class="mi">0</span>

<span class="n">t</span> <span class="o">=</span> <span class="mi">20</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">plot</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">face</span><span class="p">[</span><span class="n">t</span><span class="p">]</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s2">&quot;lower&quot;</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;jet&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;Temperature / $\sf ^\circ C$&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;$\sf N_{cells,x}$ / -&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;$\sf N_{cells,y}$ / -&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;figs/pool_fire_bndf_ast.svg&#39;</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p><strong>2. Solution</strong></p>
<div class="cell tag_hide_cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data_root</span> <span class="o">=</span> <span class="n">root</span> <span class="o">+</span> <span class="s1">&#39;data/pool_fire/10mw_sealed&#39;</span>
<span class="n">sim</span> <span class="o">=</span> <span class="n">fdsreader</span><span class="o">.</span><span class="n">Simulation</span><span class="p">(</span><span class="n">data_root</span><span class="p">)</span><span class="c1"># Vector Plots</span>
<span class="n">time</span> <span class="o">=</span> <span class="mi">20</span>
<span class="n">time_index</span> <span class="o">=</span> <span class="n">slice_temp</span><span class="o">.</span><span class="n">get_nearest_timestep</span><span class="p">(</span><span class="n">time</span><span class="p">)</span>


<span class="n">slice_u</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">slices</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">time_index</span><span class="p">]</span>
<span class="n">slice_v</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">slices</span><span class="p">[</span><span class="mi">4</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">time_index</span><span class="p">]</span>
<span class="n">n_x</span> <span class="o">=</span> <span class="n">slice_u</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">n_y</span> <span class="o">=</span> <span class="n">slice_u</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">x</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_x</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_y</span><span class="p">)</span>
<span class="n">X</span><span class="p">,</span> <span class="n">Y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">meshgrid</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
<span class="n">slice_res</span> <span class="o">=</span> <span class="p">(</span><span class="n">slice_u</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">slice_v</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">**</span><span class="mi">1</span><span class="o">/</span><span class="mi">2</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">quiver</span><span class="p">(</span><span class="n">X</span><span class="p">,</span><span class="n">Y</span><span class="p">,</span> <span class="n">slice_u</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">slice_v</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">slice_res</span><span class="o">.</span><span class="n">T</span><span class="p">,</span><span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;jet&#39;</span><span class="p">,</span> <span class="n">clim</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">50</span><span class="p">),</span> <span class="n">scale</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;Velocity / $\sf ms^{-2}$&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;$\sf N_{cells,x}$ / -&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;$\sf N_{cells,y}$ / -&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">ticks</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mf">12.5</span><span class="p">,</span><span class="mi">25</span><span class="p">],</span> <span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">2.5</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">2.5</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">(</span><span class="n">ticks</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">40</span><span class="p">,</span><span class="mi">50</span><span class="p">],</span> <span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">10</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">25</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;figs/pool_fire_velocity_vector_sealed.svg&#39;</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell tag_hide_cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data_root</span> <span class="o">=</span> <span class="n">root</span> <span class="o">+</span> <span class="s1">&#39;data/pool_fire/10mw_open&#39;</span>
<span class="n">sim</span> <span class="o">=</span> <span class="n">fdsreader</span><span class="o">.</span><span class="n">Simulation</span><span class="p">(</span><span class="n">data_root</span><span class="p">)</span><span class="c1"># Vector Plots</span>
<span class="n">time</span> <span class="o">=</span> <span class="mi">20</span>
<span class="n">time_index</span> <span class="o">=</span> <span class="n">slice_temp</span><span class="o">.</span><span class="n">get_nearest_timestep</span><span class="p">(</span><span class="n">time</span><span class="p">)</span>


<span class="n">slice_u</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">slices</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">time_index</span><span class="p">]</span>
<span class="n">slice_v</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">slices</span><span class="p">[</span><span class="mi">4</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">time_index</span><span class="p">]</span>
<span class="n">n_x</span> <span class="o">=</span> <span class="n">slice_u</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">n_y</span> <span class="o">=</span> <span class="n">slice_u</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">x</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_x</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_y</span><span class="p">)</span>
<span class="n">X</span><span class="p">,</span> <span class="n">Y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">meshgrid</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
<span class="n">slice_res</span> <span class="o">=</span> <span class="p">(</span><span class="n">slice_u</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">slice_v</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">**</span><span class="mi">1</span><span class="o">/</span><span class="mi">2</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">quiver</span><span class="p">(</span><span class="n">X</span><span class="p">,</span><span class="n">Y</span><span class="p">,</span> <span class="n">slice_u</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">slice_v</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">slice_res</span><span class="o">.</span><span class="n">T</span><span class="p">,</span><span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;jet&#39;</span><span class="p">,</span> <span class="n">clim</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">50</span><span class="p">),</span> <span class="n">scale</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;Velocity / $\sf ms^{-2}$&quot;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;$\sf N_{cells,x}$ / -&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;$\sf N_{cells,y}$ / -&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">ticks</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mf">12.5</span><span class="p">,</span><span class="mi">25</span><span class="p">],</span> <span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">2.5</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">2.5</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">(</span><span class="n">ticks</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">40</span><span class="p">,</span><span class="mi">50</span><span class="p">],</span> <span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">10</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">25</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;figs/pool_fire_velocity_vector_open.svg&#39;</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="tabbed-set docutils">
<input checked="checked" id="c411c1f5-02c6-4b7c-904e-8c18712b6196" name="45c5b05a-4b31-494f-b928-c0b69b33bb39" type="radio">
</input><label class="tabbed-label" for="c411c1f5-02c6-4b7c-904e-8c18712b6196">
10 MW, sealed domain</label><div class="tabbed-content docutils">
<a class="reference internal image-reference" href="../../../_images/pool_fire_velocity_vector_sealed.svg"><img alt="../../../_images/pool_fire_velocity_vector_sealed.svg" src="../../../_images/pool_fire_velocity_vector_sealed.svg" width="60%" /></a>
</div>
<input id="69cfbdf8-e40e-421f-8274-416fa35d8f83" name="45c5b05a-4b31-494f-b928-c0b69b33bb39" type="radio">
</input><label class="tabbed-label" for="69cfbdf8-e40e-421f-8274-416fa35d8f83">
10 MW, open domain</label><div class="tabbed-content docutils">
<a class="reference internal image-reference" href="../../../_images/pool_fire_velocity_vector_open.svg"><img alt="../../../_images/pool_fire_velocity_vector_open.svg" src="../../../_images/pool_fire_velocity_vector_open.svg" width="60%" /></a>
</div>
</div>
<p><strong>3. Solution</strong></p>
<p>The fluctuation of the HRR curve increases at higher levels. A drop in the released energy with time indicates a lower oxygen level due to the sealed compartment.</p>
<div class="cell tag_hide_cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data_root</span> <span class="o">=</span> <span class="n">root</span> <span class="o">+</span> <span class="s1">&#39;data/pool_fire/100kw_sealed&#39;</span>
<span class="n">sim</span> <span class="o">=</span> <span class="n">fdsreader</span><span class="o">.</span><span class="n">Simulation</span><span class="p">(</span><span class="n">data_root</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">sim</span><span class="o">.</span><span class="n">hrr</span><span class="p">[</span><span class="s2">&quot;Time&quot;</span><span class="p">],</span> <span class="n">sim</span><span class="o">.</span><span class="n">hrr</span><span class="p">[</span><span class="s2">&quot;HRR&quot;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;simulation&#39;</span><span class="p">)</span>
<span class="n">t_min_max</span> <span class="o">=</span> <span class="p">[</span><span class="n">sim</span><span class="o">.</span><span class="n">hrr</span><span class="p">[</span><span class="s2">&quot;Time&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">sim</span><span class="o">.</span><span class="n">hrr</span><span class="p">[</span><span class="s2">&quot;Time&quot;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span>
<span class="n">hrr_prescribed</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">t_min_max</span><span class="p">,</span> <span class="p">[</span><span class="n">hrr_prescribed</span><span class="p">,</span> <span class="n">hrr_prescribed</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;prescribed&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;best&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Time / s&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;HRR / kW&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;figs/pool_fire_100kw_sealed_hrr.svg&#39;</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell tag_hide_cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data_root</span> <span class="o">=</span> <span class="n">root</span> <span class="o">+</span> <span class="s1">&#39;data/pool_fire/1mw_sealed&#39;</span>
<span class="n">sim</span> <span class="o">=</span> <span class="n">fdsreader</span><span class="o">.</span><span class="n">Simulation</span><span class="p">(</span><span class="n">data_root</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">sim</span><span class="o">.</span><span class="n">hrr</span><span class="p">[</span><span class="s2">&quot;Time&quot;</span><span class="p">],</span> <span class="n">sim</span><span class="o">.</span><span class="n">hrr</span><span class="p">[</span><span class="s2">&quot;HRR&quot;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;simulation&#39;</span><span class="p">)</span>
<span class="n">t_min_max</span> <span class="o">=</span> <span class="p">[</span><span class="n">sim</span><span class="o">.</span><span class="n">hrr</span><span class="p">[</span><span class="s2">&quot;Time&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">sim</span><span class="o">.</span><span class="n">hrr</span><span class="p">[</span><span class="s2">&quot;Time&quot;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span>
<span class="n">hrr_prescribed</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">t_min_max</span><span class="p">,</span> <span class="p">[</span><span class="n">hrr_prescribed</span><span class="p">,</span> <span class="n">hrr_prescribed</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;prescribed&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;best&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Time / s&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;HRR / kW&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;figs/pool_fire_1mw_sealed_hrr.svg&#39;</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell tag_hide_cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data_root</span> <span class="o">=</span> <span class="n">root</span> <span class="o">+</span> <span class="s1">&#39;data/pool_fire/10mw_sealed&#39;</span>
<span class="n">sim</span> <span class="o">=</span> <span class="n">fdsreader</span><span class="o">.</span><span class="n">Simulation</span><span class="p">(</span><span class="n">data_root</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">sim</span><span class="o">.</span><span class="n">hrr</span><span class="p">[</span><span class="s2">&quot;Time&quot;</span><span class="p">],</span> <span class="n">sim</span><span class="o">.</span><span class="n">hrr</span><span class="p">[</span><span class="s2">&quot;HRR&quot;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;simulation&#39;</span><span class="p">)</span>
<span class="n">t_min_max</span> <span class="o">=</span> <span class="p">[</span><span class="n">sim</span><span class="o">.</span><span class="n">hrr</span><span class="p">[</span><span class="s2">&quot;Time&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">sim</span><span class="o">.</span><span class="n">hrr</span><span class="p">[</span><span class="s2">&quot;Time&quot;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span>
<span class="n">hrr_prescribed</span> <span class="o">=</span> <span class="mi">10000</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">t_min_max</span><span class="p">,</span> <span class="p">[</span><span class="n">hrr_prescribed</span><span class="p">,</span> <span class="n">hrr_prescribed</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;prescribed&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;best&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Time / s&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;HRR / kW&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;figs/pool_fire_10mw_sealed_hrr.svg&#39;</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="tabbed-set docutils">
<input checked="checked" id="8b92513a-261e-48aa-b99c-2be1ed58444e" name="7274b461-bb44-46dd-b0c6-44b0a94c685e" type="radio">
</input><label class="tabbed-label" for="8b92513a-261e-48aa-b99c-2be1ed58444e">
100 kW</label><div class="tabbed-content docutils">
<a class="reference internal image-reference" href="../../../_images/pool_fire_100kw_sealed_hrr.svg"><img alt="../../../_images/pool_fire_100kw_sealed_hrr.svg" src="../../../_images/pool_fire_100kw_sealed_hrr.svg" width="80%" /></a>
</div>
<input id="f8d589d9-4c3f-4b5f-bb5d-fef2b583ad60" name="7274b461-bb44-46dd-b0c6-44b0a94c685e" type="radio">
</input><label class="tabbed-label" for="f8d589d9-4c3f-4b5f-bb5d-fef2b583ad60">
1 MW</label><div class="tabbed-content docutils">
<a class="reference internal image-reference" href="../../../_images/pool_fire_1mw_sealed_hrr.svg"><img alt="../../../_images/pool_fire_1mw_sealed_hrr.svg" src="../../../_images/pool_fire_1mw_sealed_hrr.svg" width="80%" /></a>
</div>
<input id="c8affb38-0afc-4aa6-94d0-0968a5259f73" name="7274b461-bb44-46dd-b0c6-44b0a94c685e" type="radio">
</input><label class="tabbed-label" for="c8affb38-0afc-4aa6-94d0-0968a5259f73">
10 MW</label><div class="tabbed-content docutils">
<a class="reference internal image-reference" href="../../../_images/pool_fire_10mw_sealed_hrr.svg"><img alt="../../../_images/pool_fire_10mw_sealed_hrr.svg" src="../../../_images/pool_fire_10mw_sealed_hrr.svg" width="80%" /></a>
</div>
</div>
</div>
<div class="section" id="task-ii-plume-formulas">
<h2>Task II - Plume Formulas<a class="headerlink" href="#task-ii-plume-formulas" title="Permalink to this headline">¶</a></h2>
<p>This task targets the computation of the plume temperature with analytical methods in order to subsequently validate the results of an numerical simulation. For more detailed information on the theory and application of the plume formulas, please refer to the literature, e.g. Enclosure Fire Dynamics by B. Karlsson and J. Quintiere <span id="id1">[<a class="reference internal" href="../../overview/03_references.html#id19"><span>KQ99</span></a>]</span>.</p>
<p><em><strong>Heskested</strong></em></p>
<p><span class="math notranslate nohighlight">\(\small\sf \Delta T \)</span> indicates the temperature rise in the plume centerline axis above ambient temperature:</p>
<div class="math notranslate nohighlight">
\[ \small\sf
\Delta T = 9.1 \left(\frac{T_\infty}{g \cdot c_p^2 \cdot \rho_\infty^2} \right)^{1/3} \cdot \dot{Q}_c^{2/3} \cdot (z -z_0)^{-5/3}
\]</div>
<p>where <span class="math notranslate nohighlight">\(\sf \dot{Q}_c\)</span> is the convective heat release rate, <span class="math notranslate nohighlight">\(\small\sf T_\infty = 293~K\)</span> is the ambient temperature, <span class="math notranslate nohighlight">\(\small\sf g = 9.81~ms^{-1}\)</span> is the gravitational constant, <span class="math notranslate nohighlight">\(\small\sf \rho_\infty = 1.2 kg/m^3\)</span> is the
density of air at ambient temperature, <span class="math notranslate nohighlight">\(\small\sf c_p = 1.0~kJ/(kg K)\)</span> is the specific heat capacity and z is the height above the virtual plume source in m.</p>
<p>The virtual origin <span class="math notranslate nohighlight">\(z_0\)</span> depends on the (equivalent) diameter D of the fire source and the total heat release rate and is given by:</p>
<div class="math notranslate nohighlight">
\[\small\sf
z_0 = 0.083 \cdot \dot{Q}_c^{2/5} - 1.02 \cdot D
\]</div>
<p><em><strong>McCaffrey</strong></em></p>
<p><span class="math notranslate nohighlight">\(\small\sf \Delta T \)</span> indicates the temperature rise in the plume centerline axis above ambient temperature:</p>
<div class="math notranslate nohighlight">
\[\small\sf
\Delta T = \left(\frac{\kappa}{0.9 \cdot \sqrt{2g}}\right)^2 \cdot \left(\frac{z}{\dot{Q}^{2/5}}\right)^{2\eta-1} \cdot T_\infty
\]</div>
<p>where <span class="math notranslate nohighlight">\(\small\sf \dot{Q}\)</span> is the total heat release rate, <span class="math notranslate nohighlight">\(\small\sf T_\infty = 293~K\)</span> is the ambient temperature, <span class="math notranslate nohighlight">\(\small\sf g = 9.81~ms^{-1}\)</span> is the gravitational constant, z is the height above the virtual plume source in m. The constants <span class="math notranslate nohighlight">\(\small\sf \eta\)</span> and <span class="math notranslate nohighlight">\(\small\sf \kappa\)</span> vary depending on the plume regions and can be obtained from the following table.</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Region</p></th>
<th class="head"><p><span class="math notranslate nohighlight">\( \small\sf \frac{z}{\dot{Q}^{2/5}}\)</span></p></th>
<th class="head"><p><span class="math notranslate nohighlight">\(\small\sf \eta\)</span></p></th>
<th class="head"><p><span class="math notranslate nohighlight">\(\small\sf \kappa\)</span></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Continuous</p></td>
<td><p>&lt; 0.08</p></td>
<td><p>1/2</p></td>
<td><p><span class="math notranslate nohighlight">\(\small\sf 6.8~[m^{1/2}/s]\)</span></p></td>
</tr>
<tr class="row-odd"><td><p>Intermittent</p></td>
<td><p>0.08-0.2</p></td>
<td><p>0</p></td>
<td><p><span class="math notranslate nohighlight">\(\small\sf 1.9~[m/(kW^{1/5}s)]\)</span></p></td>
</tr>
<tr class="row-even"><td><p>Plume</p></td>
<td><p>&gt; 0.2</p></td>
<td><p>1/3</p></td>
<td><p><span class="math notranslate nohighlight">\(\small\sf 1.1~[m^{4/4}/(kW^{1/3}s)]\)</span></p></td>
</tr>
</tbody>
</table>
<p><strong>Task:</strong></p>
<ol class="simple">
<li><p>Calculate the plume temperatures of the plume using the analytical approaches of the Heskested and Mccaffrey Plumes at a HRR of 1 MW at heights of <span class="math notranslate nohighlight">\(\small\sf  z = 1~m, 1.5~m, 2~m, 2.5~m, 4~m\)</span>. Assume that the radiative fraction of the plume is 20 %. Compare the results and discuss the reasons for the deviations.</p></li>
<li><p>Evaluate the temperature in the plume axis for the FDS simulation by a slice file in the X-Z as well as in the Y-Z plane. Compare the temperature in the plume axis to the results of the plume formulas using temperature devices. Smooth the output of the units by a moving average to reduce noise.</p></li>
</ol>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>To reduce noise, temperatures calculated with FDS can be smoothed using a simple moving average (SMA). The SMA of a time series <span class="math notranslate nohighlight">\(\small\sf x(t)\)</span> is the sequence of arithmetic averages of <span class="math notranslate nohighlight">\(\small\sf  n\)</span> consecutive data points.
<span class="math notranslate nohighlight">\(\small\sf m_{SMA}(t) = \frac{1}{n}\sum_{t=0}^{n-1}x(t-1)\)</span></p>
</div>
<p><strong>1. Solution:</strong></p>
<p><em><strong>Heskested</strong></em></p>
<div class="toggle docutils container">
<p>Simplifying the plume formula into:</p>
<p><span class="math notranslate nohighlight">\(\small\sf \Delta T = 9.1 \left(\frac{T_\infty}{g \cdot c_p^2 \cdot \rho_\infty^2} \right)^{1/3} \cdot \dot{Q}_c^{2/3} \cdot (z -z_0)^{-5/3} = 25 \left( \frac{\dot{Q}_c^{2/5}}{(z -z_0)}\right)^{5/3}\)</span></p>
<p>The equivalent diameter:</p>
<p><span class="math notranslate nohighlight">\(\small\sf D = 2 \sqrt{\frac{A}{2\pi}} = 2 \sqrt{\frac{1}{2\pi}} \approx 0.8\)</span></p>
<p>The virtual plume origin:</p>
<p><span class="math notranslate nohighlight">\(\small\sf z_0 = 0.083 \cdot (0.8 \cdot 1000)^{2/5} - 1.02 \cdot 0.8 \approx 0.39 m\)</span></p>
<p>The plume temperature at different heights:</p>
<p><span class="math notranslate nohighlight">\(\small\sf z = 1.0 m:\)</span> <span class="math notranslate nohighlight">\(\small\sf \Delta T = 25 \left( \frac{800^{2/5}}{(1 + 0.39)}\right)^{5/3} = 1244~K\)</span></p>
<!-- $\small\sf z = 1.5 m:$ $\small\sf  \Delta T = 25 \left( \frac{800^{2/5}}{(1.5 + 0.39)}\right)^{5/3} = 745~K$


$\small\sf z = 2.0 m:$ $\small\sf  \Delta T = 25 \left( \frac{800^{2/5}}{(2 + 0.39)}\right)^{5/3} = 504~K$

$\small\sf z = 2.5 m:$ $\small\sf  \Delta T = 25 \left( \frac{800^{2/5}}{(2.5 + 0.39)}\right)^{5/3} = 367~K$

$\small\sf z = 4.0 m:$ $\small\sf  \Delta T = 25 \left( \frac{800^{2/5}}{(4.0 + 0.39)}\right)^{5/3} = 183~K$ -->
</div>
<p><em><strong>McCaffrey</strong></em></p>
<div class="toggle docutils container">
<p><span class="math notranslate nohighlight">\(\small\sf z = 1.0 m: \frac{z}{\dot{Q}^{2/5}} = \frac{1}{1000^{2/5}} = 0.063~|~0.063 &lt; 0.008\)</span> -&gt; Continuous</p>
<!-- $\small\sf z = 1.5 m: \frac{z}{\dot{Q}^{2/5}} = \frac{1.5}{1000^{2/5}} = 0.095~|~0.2 > 0.095 > 0.008$ -> Intermediate

$\small\sf z = 2.0 m: \frac{z}{\dot{Q}^{2/5}} = \frac{2.0}{1000^{2/5}} = 0.126~|~0.2 > 0.126 > 0.008$ -> Intermediate

$\small\sf z = 2.5 m: \frac{z}{\dot{Q}^{2/5}} = \frac{2.5}{1000^{2/5}} = 0.158~|~0.2 > 0.158 > 0.008$ -> Intermediate

$\small\sf z = 4.0 m: \frac{z}{\dot{Q}^{2/5}} = \frac{4.0}{1000^{2/5}} = 0.252~|~0.252 > 0.2$ -> Plume -->
<p>The calculated temperatures and the respective auxiliary constants used can be found in the following table:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-align:center head"><p><span class="math notranslate nohighlight">\(\small\sf z [m]\)</span></p></th>
<th class="text-align:center head"><p><span class="math notranslate nohighlight">\(\small\sf \frac{z}{\dot{Q}^{2/5}}[m/kW^{2/5}]\)</span></p></th>
<th class="text-align:center head"><p><span class="math notranslate nohighlight">\(\small\sf \eta\)</span></p></th>
<th class="text-align:center head"><p><span class="math notranslate nohighlight">\(\small\sf \kappa\)</span></p></th>
<th class="text-align:center head"><p><span class="math notranslate nohighlight">\(\small\sf \Delta T [\circ C]\)</span></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:center"><p>1.0</p></td>
<td class="text-align:center"><p>0.063</p></td>
<td class="text-align:center"><p>1/2</p></td>
<td class="text-align:center"><p><span class="math notranslate nohighlight">\(\small\sf 6.8~m^{1/1}/s\)</span></p></td>
<td class="text-align:center"><p>852</p></td>
</tr>
<tr class="row-odd"><td class="text-align:center"><p>1.5</p></td>
<td class="text-align:center"><p>0.095</p></td>
<td class="text-align:center"><p>0</p></td>
<td class="text-align:center"><p><span class="math notranslate nohighlight">\(\small\sf 1.9~m/(kW^{1/5}/s)\)</span></p></td>
<td class="text-align:center"><p>700</p></td>
</tr>
<tr class="row-even"><td class="text-align:center"><p>2.0</p></td>
<td class="text-align:center"><p>0.126</p></td>
<td class="text-align:center"><p>0</p></td>
<td class="text-align:center"><p><span class="math notranslate nohighlight">\(\small\sf 1.9~m/(kW^{1/5}/s)\)</span></p></td>
<td class="text-align:center"><p>528</p></td>
</tr>
<tr class="row-odd"><td class="text-align:center"><p>2.5</p></td>
<td class="text-align:center"><p>0.158</p></td>
<td class="text-align:center"><p>0</p></td>
<td class="text-align:center"><p><span class="math notranslate nohighlight">\(\small\sf 1.9~m/(kW^{1/5}/s)\)</span></p></td>
<td class="text-align:center"><p>421</p></td>
</tr>
<tr class="row-even"><td class="text-align:center"><p>4.0</p></td>
<td class="text-align:center"><p>0.252</p></td>
<td class="text-align:center"><p>-1/3</p></td>
<td class="text-align:center"><p><span class="math notranslate nohighlight">\(\small\sf 1~m/(kW^{1/3}/s)\)</span></p></td>
<td class="text-align:center"><p>221</p></td>
</tr>
</tbody>
</table>
</div>
<p><em><strong>FDS Devices</strong></em></p>
<div class="cell tag_hide_cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.patches</span> <span class="k">as</span> <span class="nn">mpatches</span>
<span class="kn">from</span> <span class="nn">matplotlib.lines</span> <span class="kn">import</span> <span class="n">Line2D</span>


<span class="k">def</span> <span class="nf">sma</span> <span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">window</span><span class="p">):</span>
    <span class="n">weights</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">window</span><span class="p">)</span><span class="o">/</span><span class="n">window</span>
    <span class="n">sma</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">convolve</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">weights</span><span class="p">,</span> <span class="s1">&#39;valid&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">sma</span>
<span class="n">d_t_hesk_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1244</span><span class="p">,</span> <span class="mi">745</span><span class="p">,</span> <span class="mi">504</span><span class="p">,</span> <span class="mi">367</span><span class="p">,</span> <span class="mi">183</span><span class="p">]</span>
<span class="n">d_t_mcf_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">852</span><span class="p">,</span> <span class="mi">700</span><span class="p">,</span> <span class="mi">528</span><span class="p">,</span> <span class="mi">421</span><span class="p">,</span> <span class="mi">221</span><span class="p">]</span>
<span class="n">color_list</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">]</span>
<span class="n">data_root</span> <span class="o">=</span> <span class="n">root</span> <span class="o">+</span> <span class="s1">&#39;data/pool_fire/1mw_open&#39;</span>
<span class="n">sim</span> <span class="o">=</span> <span class="n">fdsreader</span><span class="o">.</span><span class="n">Simulation</span><span class="p">(</span><span class="n">data_root</span><span class="p">)</span>
<span class="n">devc_list</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">]</span>
<span class="n">window</span> <span class="o">=</span> <span class="mi">100</span>
<span class="k">for</span> <span class="n">z</span><span class="p">,</span> <span class="n">d_t_hesk</span><span class="p">,</span> <span class="n">d_t_mcf</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">devc_list</span><span class="p">,</span> <span class="n">d_t_hesk_list</span><span class="p">,</span> <span class="n">d_t_mcf_list</span><span class="p">,</span> <span class="n">color_list</span><span class="p">):</span>
    <span class="n">time</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">devices</span><span class="p">[</span><span class="s1">&#39;Time&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">data</span>
    <span class="n">temperature</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">devices</span><span class="p">[</span><span class="sa">f</span><span class="s1">&#39;T_</span><span class="si">{</span><span class="n">z</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">data</span>
<span class="c1">#     plt.scatter(time, temperature, s=1, alpha=0.1, color=c)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">sma</span><span class="p">(</span><span class="n">time</span><span class="p">,</span> <span class="n">window</span><span class="p">),</span> <span class="n">sma</span><span class="p">(</span><span class="n">temperature</span><span class="p">,</span> <span class="n">window</span><span class="p">),</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;z = </span><span class="si">{</span><span class="n">z</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">c</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">d_t_hesk</span><span class="o">+</span><span class="mi">20</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">c</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;dashed&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">d_t_mcf</span><span class="o">+</span><span class="mi">20</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">c</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;dotted&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;$\sf z=</span><span class="si">{</span><span class="n">z</span><span class="si">}</span><span class="s2">~m$&quot;</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="n">d_t_hesk</span><span class="o">-</span><span class="mi">50</span><span class="p">),</span>  <span class="n">color</span><span class="o">=</span><span class="n">c</span><span class="p">,</span> <span class="n">annotation_clip</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;best&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Time / s&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Temperature / $\sf ^\circ C$&quot;</span><span class="p">)</span>
<span class="n">line_fds</span> <span class="o">=</span> <span class="n">Line2D</span><span class="p">([</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;-&#39;</span><span class="p">)</span>
<span class="n">line_hesk</span> <span class="o">=</span> <span class="n">Line2D</span><span class="p">([</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;dashed&#39;</span><span class="p">)</span>
<span class="n">line_mcf</span> <span class="o">=</span> <span class="n">Line2D</span><span class="p">([</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;dotted&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="n">line_fds</span><span class="p">,</span> <span class="n">line_hesk</span><span class="p">,</span> <span class="n">line_mcf</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;FDS&quot;</span><span class="p">,</span> <span class="s2">&quot;Heskestad&quot;</span><span class="p">,</span> <span class="s2">&quot;MCCaffrey&quot;</span><span class="p">])</span>

<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;figs/pool_fire_1mw_open_temperatures_devc.svg&#39;</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p><strong>2. Solution</strong></p>
<div class="figure align-default" id="fig-pool-fire-hrr">
<a class="reference internal image-reference" href="../../../_images/pool_fire_1mw_open_temperatures_devc.svg"><img alt="../../../_images/pool_fire_1mw_open_temperatures_devc.svg" src="../../../_images/pool_fire_1mw_open_temperatures_devc.svg" width="80%" /></a>
<p class="caption"><span class="caption-number">Fig. 3.7 </span><span class="caption-text">Moving average of <code class="docutils literal notranslate"><span class="pre">TEMPERATURE</span></code> devices at heights 1.0, 1.5, 2.0, 2.5, 4.0 m, smoothed over 100 datapoints.</span><a class="headerlink" href="#fig-pool-fire-hrr" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="task-iii-time-dependent-heat-release-rate">
<h2>Task III – Time-dependent Heat Release Rate<a class="headerlink" href="#task-iii-time-dependent-heat-release-rate" title="Permalink to this headline">¶</a></h2>
<p>This task deals with the different possibilities to define the heat release rate (HRR) of a design fire and to model it in FDS. The total heat release  <span class="math notranslate nohighlight">\(\small\sf \dot{Q}\)</span> of a burning area <span class="math notranslate nohighlight">\(\small\sf A_{fire}\)</span> depends on the heat release rate per unit area <span class="math notranslate nohighlight">\(\small\sf \dot{q}''\)</span>:</p>
<div class="math notranslate nohighlight">
\[\small\sf \dot{Q} = {A_{Fire} \cdot \dot{q}''}\]</div>
<p>In FDS a burning area is defined by a <code class="docutils literal notranslate"><span class="pre">VENT</span></code> with a certain surface property that can be assigned by a <code class="docutils literal notranslate"><span class="pre">SURF_ID</span></code>. A fixed heat release rate per unit area can be set to a <code class="docutils literal notranslate"><span class="pre">SURF</span></code> by the attribute <code class="docutils literal notranslate"><span class="pre">HRRPUA</span></code>. Please refer to section 10.2.1 “Basics” of the <a class="reference external" href="https://github.com/firemodels/fds/releases/download/FDS6.7.5/FDS_User_Guide.pdf">FDS User’s Guide</a> for further information.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Create an automation in Python or Excel that outputs the strings of the RAMP lines for the FDS input file.</p>
</div>
<p><strong>Task:</strong></p>
<ol>
<li><p>Model the HRR progression for a radially spreading fire with a maximum power of 1 MW in FDS assuming a fixed burning area (task 1.1) and a radial propagation from the center of the burning area (task 1.2).</p>
<ol>
<li><p>The HRR according to the ‘t-square’ model can be described by:</p>
<div class="math notranslate nohighlight">
\[\small\sf \dot Q = \alpha \cdot t^2\]</div>
<p>where t is the  burning time after ignition and <span class="math notranslate nohighlight">\(\small\sf \alpha\)</span> is the fire growth factor.Assume a fast fire propagation by <span class="math notranslate nohighlight">\(\small\sf \alpha = 0.04689~kW/s^2\)</span> and a <strong>constant</strong> heat release rate per unit area of <span class="math notranslate nohighlight">\(\small\sf  \dot{q}'' = 0.25~MW/m^2\)</span>. The maximum burning area is <span class="math notranslate nohighlight">\(\small\sf  A_{fire} = 1~m^2\)</span>. First calculate the time until the fire has spread to the entire area. This corresponds to the time at which the maximum HRR is reached. For simplicity, assume a perfect radial fire spread and a round fire area. Then model the temporal evolution of the HRR in FDS via a <code class="docutils literal notranslate"><span class="pre">RAMP</span></code> function (See section 20.6 “Controlling a Ramp” of the <a class="reference external" href="https://github.com/firemodels/fds/releases/download/FDS6.7.5/FDS_User_Guide.pdf">FDS User’s Guide</a> ).</p>
</li>
<li><p>Model the fire propagation directly in FDS by defining the spread rate. The <code class="docutils literal notranslate"><span class="pre">SPREAD</span></code> attribute denotes a constant radial propagation speed from a specified point.</p></li>
</ol>
<div class="figure align-default" id="fig-pool-fire-spread">
<a class="reference internal image-reference" href="../../../_images/pool_fire_spread.svg"><img alt="../../../_images/pool_fire_spread.svg" src="../../../_images/pool_fire_spread.svg" width="30%" /></a>
<p class="caption"><span class="caption-number">Fig. 3.8 </span><span class="caption-text">Fire propagation via FDS <code class="docutils literal notranslate"><span class="pre">SPREAD</span></code> attribute</span><a class="headerlink" href="#fig-pool-fire-spread" title="Permalink to this image">¶</a></p>
</div>
<p>For instructions on how to model a radial fire spread in FDS, please refer to the <a class="reference external" href="https://github.com/firemodels/fds/releases/download/FDS6.7.5/FDS_User_Guide.pdf">FDS User’s Guide</a> Section 11.4.2 “Special Topic: A Radially-Spreading Fire”. The radial propagation speed v can be obtained from the fire area <span class="math notranslate nohighlight">\(\small\sf A_{Fire}\)</span> and the corresponding burning period t.</p>
<div class="math notranslate nohighlight">
\[\small\sf v = \frac{\sqrt{A_{fire}/\pi}}{t}\]</div>
<ol class="simple">
<li><p>Compare the HRR curves calculated by FDS with each other and discuss the limitations and inaccuracies associated with each approach.</p></li>
</ol>
</li>
<li><p>Given is the fictional mass loss of a heptane fire. Calculate the heat release of the fire over the entire burning period with an assumed effective heat of combustion <span class="math notranslate nohighlight">\(\small\sf  \Delta h_{c,eff} = 44,590~kJ / kg\)</span>. Model the HRR in FDS by using the RAMP function. Check if the simulated curve matches the prescribed HRR. The effective heat of combustion indicates the heat release per unit of weight of a material burned in combustion. For simplicity, assume that the averaged mass loss between two time steps applies to the end of each time interval.
The mass loss caused by the burn-up can be described by the following time-dependent correlation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">time_index</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">75</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">125</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">175</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">225</span><span class="p">,</span> <span class="mi">250</span><span class="p">,</span> <span class="mi">275</span> <span class="p">]</span> <span class="c1"># [s]</span>
<span class="n">total_mass</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4000</span><span class="p">,</span> <span class="mi">4000</span><span class="p">,</span> <span class="mi">3600</span><span class="p">,</span> <span class="mi">3040</span><span class="p">,</span> <span class="mi">2880</span><span class="p">,</span> <span class="mi">2400</span><span class="p">,</span> <span class="mi">1800</span><span class="p">,</span> <span class="mi">1120</span><span class="p">,</span> <span class="mi">600</span><span class="p">,</span> <span class="mi">160</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="c1"># [g]</span>
</pre></div>
</div>
</li>
</ol>
<p><strong>1. Solution</strong></p>
<div class="toggle docutils container">
<p>The burning period for the fire to reach the maximum heat release is:</p>
<div class="math notranslate nohighlight">
\[
t = \frac{\dot{q}'' \cdot A_{Fire}}{\alpha} = \frac{250 \cdot 1}{0.04689} \approx 73~s
\]</div>
<p>By setting the time and fraction parameters <code class="docutils literal notranslate"><span class="pre">T</span></code> and <code class="docutils literal notranslate"><span class="pre">F</span></code>, the <code class="docutils literal notranslate"><span class="pre">RAMP</span></code> function is obtained as follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&amp;SURF ID = &#39;BURNER&#39;, HRRPUA = 250, RAMP_Q = &#39;fireramp&#39;, COLOR = &#39;RASPBERRY&#39; /
&amp;VENT XB = -0.5,0.5, -0.5,0.5, 0.0, 0.0, SURF_ID=&#39;BURNER&#39; /
&amp;RAMP ID=&#39;fireramp&#39;, T=0, F=0.00
.
.
.
&amp;RAMP ID=&#39;fireramp&#39;, T=73, F=1.00
</pre></div>
</div>
<p>The spread rate corresponds to the propagation speed in m/s:</p>
<div class="math notranslate nohighlight">
\[
\small\sf v = \frac{\sqrt{A_{fire}/\pi}}{t} = \frac{\sqrt{1/\pi}}{73} = 0.00773 m/s
\]</div>
<p>Starting from the center of the vent, the radial propagation of the fire in FDS can be described as follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&amp;SURF ID = &#39;BURNER&#39;, HRRPUA = 250, COLOR = &#39;RASPBERRY&#39; /
&amp;VENT XB = -0.5,0.5, -0.5,0.5, 0.0, 0.0, SURF_ID=&#39;BURNER&#39;, SPREAD_RATE = 0.00773 /
</pre></div>
</div>
</div>
<div class="cell tag_hide_cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">alpha</span> <span class="o">=</span> <span class="mf">0.04689</span>
<span class="n">Qdot_max</span> <span class="o">=</span> <span class="mi">250</span>
<span class="n">t</span> <span class="o">=</span> <span class="p">(</span><span class="n">Qdot_max</span> <span class="o">/</span> <span class="n">alpha</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&amp;SURF ID = &#39;BURNER&#39;, HRRPUA = </span><span class="si">{</span><span class="n">Qdot_max</span><span class="si">}</span><span class="s2">, RAMP_Q = &#39;fireramp&#39;, COLOR = &#39;RASPBERRY&#39; /&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">74</span><span class="p">):</span>
    <span class="n">Qdot</span> <span class="o">=</span> <span class="n">alpha</span> <span class="o">*</span> <span class="n">t</span> <span class="o">**</span><span class="mi">2</span>
    
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&amp;RAMP ID=&#39;fireramp&#39;, T=</span><span class="si">{</span><span class="n">t</span><span class="si">}</span><span class="s2">, F=</span><span class="si">{</span><span class="n">Qdot</span> <span class="o">/</span> <span class="n">Qdot_max</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell tag_hide_cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data_root</span> <span class="o">=</span> <span class="n">root</span> <span class="o">+</span> <span class="s1">&#39;data/pool_fire/ramp_spread/rundir&#39;</span>
<span class="n">sim</span> <span class="o">=</span> <span class="n">fdsreader</span><span class="o">.</span><span class="n">Simulation</span><span class="p">(</span><span class="n">data_root</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">sim</span><span class="o">.</span><span class="n">hrr</span><span class="p">[</span><span class="s2">&quot;Time&quot;</span><span class="p">],</span> <span class="n">sim</span><span class="o">.</span><span class="n">hrr</span><span class="p">[</span><span class="s2">&quot;HRR&quot;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;FDS SPREAD&#39;</span><span class="p">)</span>
<span class="n">t_min_max</span> <span class="o">=</span> <span class="p">[</span><span class="n">sim</span><span class="o">.</span><span class="n">hrr</span><span class="p">[</span><span class="s2">&quot;Time&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">sim</span><span class="o">.</span><span class="n">hrr</span><span class="p">[</span><span class="s2">&quot;Time&quot;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span>

<span class="n">data_root</span> <span class="o">=</span> <span class="n">root</span> <span class="o">+</span> <span class="s1">&#39;data/pool_fire/ramp_tsquare&#39;</span>
<span class="n">sim</span> <span class="o">=</span> <span class="n">fdsreader</span><span class="o">.</span><span class="n">Simulation</span><span class="p">(</span><span class="n">data_root</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">sim</span><span class="o">.</span><span class="n">hrr</span><span class="p">[</span><span class="s2">&quot;Time&quot;</span><span class="p">],</span> <span class="n">sim</span><span class="o">.</span><span class="n">hrr</span><span class="p">[</span><span class="s2">&quot;HRR&quot;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;FDS RAMP&#39;</span><span class="p">)</span>
<span class="n">t_min_max</span> <span class="o">=</span> <span class="p">[</span><span class="n">sim</span><span class="o">.</span><span class="n">hrr</span><span class="p">[</span><span class="s2">&quot;Time&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">sim</span><span class="o">.</span><span class="n">hrr</span><span class="p">[</span><span class="s2">&quot;Time&quot;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span>

<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;best&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Time / s&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;HRR / kW&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;figs/pool_fire_10mw_sealed_hrr_spread.svg&#39;</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="figure align-default" id="fig-pool-fire-hrr-spread">
<a class="reference internal image-reference" href="../../../_images/pool_fire_10mw_sealed_hrr_spread.svg"><img alt="../../../_images/pool_fire_10mw_sealed_hrr_spread.svg" src="../../../_images/pool_fire_10mw_sealed_hrr_spread.svg" width="80%" /></a>
<p class="caption"><span class="caption-number">Fig. 3.9 </span><span class="caption-text">Simulated <code class="docutils literal notranslate"><span class="pre">HRR</span></code> generated by <code class="docutils literal notranslate"><span class="pre">RAMP</span></code> and <code class="docutils literal notranslate"><span class="pre">SPREAD</span></code> as a function of time.</span><a class="headerlink" href="#fig-pool-fire-hrr-spread" title="Permalink to this image">¶</a></p>
</div>
<p><strong>2. Solution</strong></p>
<div class="toggle docutils container">
<p>The HRR can be obtained from the mass loss <span class="math notranslate nohighlight">\(\small\sf \dot{m_{fuel}}\)</span> by the following expression:
$<span class="math notranslate nohighlight">\(\small\sf \dot{Q} = \Delta h_{c,eff} \dot{m_{fuel}}\)</span>$</p>
<p>The maximum</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&amp;SURF ID = &#39;BURNER&#39;, HRRPUA = 1212.85, RAMP_Q = &#39;fireramp&#39;, COLOR = &#39;RASPBERRY&#39; /
&amp;RAMP ID=&#39;fireramp&#39;, T=0, F=0.00 /
&amp;RAMP ID=&#39;fireramp&#39;, T=25, F=0.15 /
&amp;RAMP ID=&#39;fireramp&#39;, T=50, F=0.59 /
&amp;RAMP ID=&#39;fireramp&#39;, T=75, F=0.68 /
&amp;RAMP ID=&#39;fireramp&#39;, T=100, F=0.35 /
&amp;RAMP ID=&#39;fireramp&#39;, T=125, F=0.59 /
&amp;RAMP ID=&#39;fireramp&#39;, T=150, F=0.88 /
&amp;RAMP ID=&#39;fireramp&#39;, T=175, F=1.00 /
&amp;RAMP ID=&#39;fireramp&#39;, T=200, F=0.76 /
&amp;RAMP ID=&#39;fireramp&#39;, T=225, F=0.65 /
&amp;RAMP ID=&#39;fireramp&#39;, T=250, F=0.24 /
&amp;RAMP ID=&#39;fireramp&#39;, T=275, F=0.00 /
</pre></div>
</div>
</div>
<div class="cell tag_hide_cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">time_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">75</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">125</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">175</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">225</span><span class="p">,</span> <span class="mi">250</span><span class="p">,</span> <span class="mi">275</span> <span class="p">]</span>
<span class="n">mass_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4000</span><span class="p">,</span> <span class="mi">3900</span><span class="p">,</span> <span class="mi">3500</span><span class="p">,</span> <span class="mi">3040</span><span class="p">,</span> <span class="mi">2800</span><span class="p">,</span> <span class="mi">2400</span><span class="p">,</span> <span class="mi">1800</span><span class="p">,</span> <span class="mi">1120</span><span class="p">,</span> <span class="mi">600</span><span class="p">,</span> <span class="mi">160</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">mlr_list</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">mass_list</span><span class="p">)</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">time_list</span><span class="p">)</span> <span class="c1"># mass loss rate</span>

<span class="n">huc</span> <span class="o">=</span> <span class="mi">44590</span> <span class="c1"># Effective heat of combustion huc = 44590 KJ / kg</span>
<span class="n">hrr_list</span> <span class="o">=</span><span class="nb">abs</span><span class="p">(</span><span class="n">mlr_list</span><span class="o">/</span><span class="mi">1000</span><span class="o">*</span><span class="n">huc</span><span class="p">)</span> <span class="c1"># calculate HRR from mass loss</span>
<span class="n">hrr_list</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(([</span><span class="mi">0</span><span class="p">],</span> <span class="n">hrr_list</span><span class="p">))</span> <span class="c1"># add 0 mass at first timestep</span>
<span class="nb">print</span><span class="p">(</span><span class="n">hrr_list</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&amp;SURF ID = &#39;BURNER&#39;, HRRPUA = </span><span class="si">{</span><span class="nb">max</span><span class="p">(</span><span class="n">hrr_list</span><span class="p">)</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">, RAMP_Q = &#39;fireramp&#39;, COLOR = &#39;RASPBERRY&#39; /&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">time</span><span class="p">,</span> <span class="n">hrr</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">time_list</span><span class="p">,</span> <span class="n">hrr_list</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&amp;RAMP ID=&#39;fireramp&#39;, T=</span><span class="si">{</span><span class="n">time</span><span class="si">}</span><span class="s2">, F=</span><span class="si">{</span><span class="n">hrr</span><span class="o">/</span><span class="nb">max</span><span class="p">(</span><span class="n">hrr_list</span><span class="p">)</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> /&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell tag_hide_cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Plot HRR from Simulation</span>
<span class="n">data_root</span> <span class="o">=</span> <span class="n">root</span> <span class="o">+</span> <span class="s1">&#39;data/pool_fire/ramp_heptane/rundir&#39;</span>
<span class="n">sim</span> <span class="o">=</span> <span class="n">fdsreader</span><span class="o">.</span><span class="n">Simulation</span><span class="p">(</span><span class="n">data_root</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">sim</span><span class="o">.</span><span class="n">hrr</span><span class="p">[</span><span class="s2">&quot;Time&quot;</span><span class="p">],</span> <span class="n">sim</span><span class="o">.</span><span class="n">hrr</span><span class="p">[</span><span class="s2">&quot;HRR&quot;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;simulation&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Time / s&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;HRR / kW&quot;</span><span class="p">)</span>
<span class="c1"># Plot prescribed data</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">time_list</span><span class="p">,</span> <span class="n">hrr_list</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;prescribed&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;best&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;figs/pool_fire_hrr_heptane_ramp.svg&#39;</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>
<span class="c1"># plt.close()</span>
</pre></div>
</div>
</div>
</div>
<div class="figure align-default" id="fig-pool-fire-hrr-ramp">
<a class="reference internal image-reference" href="../../../_images/pool_fire_hrr_heptane_ramp.svg"><img alt="../../../_images/pool_fire_hrr_heptane_ramp.svg" src="../../../_images/pool_fire_hrr_heptane_ramp.svg" width="80%" /></a>
<p class="caption"><span class="caption-number">Fig. 3.10 </span><span class="caption-text">Prescribed and simulated <code class="docutils literal notranslate"><span class="pre">HRR</span></code> of n-heptane fire as a function of time. The heat release can be derived from the mass loss and the effective heat of combustion <span class="math notranslate nohighlight">\(\small\sf \Delta h_{c,eff}\)</span>.</span><a class="headerlink" href="#fig-pool-fire-hrr-ramp" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="task-iv-grid-convergence-hpc-computing-benchmarking">
<h2>Task IV – Grid Convergence / HPC computing / Benchmarking<a class="headerlink" href="#task-iv-grid-convergence-hpc-computing-benchmarking" title="Permalink to this headline">¶</a></h2>
<p>This task deals with the monitoring of simulation parameters such as computation time and the convergence of numerical solutions.</p>
<p><strong>Task:</strong></p>
<ol class="simple">
<li><p>Increase / decrease the grid resolution by factors of 0.4 and 2. Monitor the computing time by evaluating the .out file.</p></li>
<li><p>Extend the examination by refining the grid by a factor of 4 and 8, using resources of parallel computing. For this purpose subdivide the computational domain into several meshes.</p></li>
<li><p>Analyze the computation time for assigning multiple cores to a single OpenMP process. Split the computational domain into different meshes and assign individual MPI processes to each of them. Try to combine MPI and OpenMP and evaluate the increase in performance.</p></li>
<li><p>Check grid convergence for the respective resolutions of the domain based on temperature and velocity criteria</p></li>
</ol>
<p><strong>Solution:</strong></p>
<div class="cell tag_hide_cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="n">data_root</span> <span class="o">=</span> <span class="n">root</span> <span class="o">+</span> <span class="s1">&#39;data/pool_fire/gc_3_1/rundir&#39;</span>
<span class="n">caselist</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;gc_1_1&#39;</span><span class="p">,</span> <span class="s1">&#39;gc_1_2&#39;</span><span class="p">,</span> <span class="s1">&#39;gc_1_3&#39;</span><span class="p">,</span> <span class="s1">&#39;gc_2_1&#39;</span><span class="p">,</span> <span class="s1">&#39;gc_2_2&#39;</span><span class="p">,</span> <span class="s1">&#39;gc_2_3&#39;</span><span class="p">,</span> <span class="s1">&#39;gc_3_1&#39;</span><span class="p">,</span> <span class="s1">&#39;gc_3_2&#39;</span><span class="p">,</span> <span class="s1">&#39;gc_3_3&#39;</span> <span class="p">]</span>
<span class="n">bm_dict</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">case</span> <span class="ow">in</span> <span class="n">caselist</span><span class="p">:</span>
    <span class="n">case_dict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">data_root</span> <span class="o">=</span> <span class="n">root</span> <span class="o">+</span> <span class="sa">f</span><span class="s1">&#39;data/pool_fire/</span><span class="si">{</span><span class="n">case</span><span class="si">}</span><span class="s1">/rundir&#39;</span>
    <span class="n">sim</span> <span class="o">=</span> <span class="n">fdsreader</span><span class="o">.</span><span class="n">Simulation</span><span class="p">(</span><span class="n">data_root</span><span class="p">)</span>
    <span class="n">case_dict</span><span class="p">[</span><span class="s1">&#39;devc_temp&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">devices</span><span class="p">[</span><span class="sa">f</span><span class="s1">&#39;T_</span><span class="si">{</span><span class="mf">1.0</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">data</span>
    <span class="n">case_dict</span><span class="p">[</span><span class="s1">&#39;sim_time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">devices</span><span class="p">[</span><span class="s1">&#39;Time&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">data</span>
    <span class="n">case_dict</span><span class="p">[</span><span class="s1">&#39;total_time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">cpu</span><span class="p">[</span><span class="s1">&#39;Total T_USED (s)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">out_file</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">out_file_path</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">out_file</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">file</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;Total Number of Grid Cells&#39;</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
                <span class="n">case_dict</span><span class="p">[</span><span class="s1">&#39;n_cells&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;Cells&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">if</span> <span class="s1">&#39;Number of OpenMP Threads:&#39;</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
                <span class="n">case_dict</span><span class="p">[</span><span class="s1">&#39;n_open_mp&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;Number of OpenMP Threads:&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">if</span> <span class="s1">&#39;Number of MPI Processes:&#39;</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
                <span class="n">case_dict</span><span class="p">[</span><span class="s1">&#39;n_mpi&#39;</span><span class="p">]</span><span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;Number of MPI Processes:&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
    
    <span class="n">bm_dict</span><span class="p">[</span><span class="n">case</span><span class="p">]</span> <span class="o">=</span> <span class="n">case_dict</span>
<span class="n">bm_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">bm_dict</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>

<span class="k">for</span> <span class="n">n_open_mp</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">]:</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">bm_df</span><span class="p">[</span><span class="n">bm_df</span><span class="p">[</span><span class="s1">&#39;n_open_mp&#39;</span><span class="p">]</span><span class="o">==</span><span class="n">n_open_mp</span><span class="p">]</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;n_cells&#39;</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;total_time&#39;</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;$\sf N_</span><span class="se">{{</span><span class="s2">openMP</span><span class="se">}}</span><span class="s2">$ = </span><span class="si">{</span><span class="n">n_open_mp</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xscale</span><span class="p">(</span><span class="s1">&#39;log&#39;</span><span class="p">)</span>
<span class="c1"># plt.yscale(&#39;log&#39;)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;$\sf N_{{cells}}$ / -&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Time / s&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;best&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;figs/pool_fire_benchmarking.svg&#39;</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell tag_hide_cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">window</span> <span class="o">=</span> <span class="mi">10</span>
<span class="k">for</span> <span class="n">n_cells</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">31250</span><span class="p">,</span> <span class="mi">250000</span><span class="p">]:</span>
    <span class="n">time</span> <span class="o">=</span> <span class="n">bm_df</span><span class="p">[</span><span class="n">bm_df</span><span class="p">[</span><span class="s1">&#39;n_cells&#39;</span><span class="p">]</span><span class="o">==</span><span class="n">n_cells</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;sim_time&#39;</span><span class="p">]</span>
    <span class="n">temp</span> <span class="o">=</span> <span class="n">bm_df</span><span class="p">[</span><span class="n">bm_df</span><span class="p">[</span><span class="s1">&#39;n_cells&#39;</span><span class="p">]</span><span class="o">==</span><span class="n">n_cells</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;devc_temp&#39;</span><span class="p">]</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">sma</span><span class="p">(</span><span class="n">time</span><span class="p">,</span> <span class="n">window</span><span class="p">),</span> <span class="n">sma</span><span class="p">(</span><span class="n">temp</span><span class="p">,</span> <span class="n">window</span><span class="p">),</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;$\sf N_</span><span class="se">{{</span><span class="s2">cells</span><span class="se">}}</span><span class="s2">$ = </span><span class="si">{</span><span class="n">n_cells</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;lower right&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Time / s&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Temperature / $\sf ^\circ C$&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;figs/pool_fire_grid_convergence.svg&#39;</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="figure align-default" id="fig-pool-fire-benchmarking">
<a class="reference internal image-reference" href="../../../_images/pool_fire_benchmarking.svg"><img alt="../../../_images/pool_fire_benchmarking.svg" src="../../../_images/pool_fire_benchmarking.svg" width="80%" /></a>
<p class="caption"><span class="caption-number">Fig. 3.11 </span><span class="caption-text">Total computation time as a function of the total number of grid cells in the computational domain ( <span class="math notranslate nohighlight">\(\sf N_{cells}\)</span> ) for different amount of openMP processes (<span class="math notranslate nohighlight">\(\sf N_{openMP}\)</span>).</span><a class="headerlink" href="#fig-pool-fire-benchmarking" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-default" id="fig-pool-fire-grid-convergence">
<a class="reference internal image-reference" href="../../../_images/pool_fire_grid_convergence.svg"><img alt="../../../_images/pool_fire_grid_convergence.svg" src="../../../_images/pool_fire_grid_convergence.svg" width="80%" /></a>
<p class="caption"><span class="caption-number">Fig. 3.12 </span><span class="caption-text">Checking grid convergence for a device with quantity <code class="docutils literal notranslate"><span class="pre">TEMPERATURE</span></code> at XYZ (0, 0, 1). A grid size of 20 cm and below, which results in a total number of 31250 cells, does not show any significant change in temperature.</span><a class="headerlink" href="#fig-pool-fire-grid-convergence" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./content/modelling/03_compartments"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
        <div class='prev-next-bottom'>
            
    <a class='left-prev' id="prev-link" href="02_design_fire.html" title="previous page"><span class="section-number">3.2. </span>Design Fires</a>
    <a class='right-next' id="next-link" href="04_steckler.html" title="next page"><span class="section-number">3.4. </span>Example - Steckler Compartment</a>

        </div>
        
        </div>
    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          <div class="extra_footer">
            <p>
<img src='https://mirrors.creativecommons.org/presskit/buttons/88x31/svg/by-sa.svg' height='31'/>
| By Team Fire | Contacts and Infos: <a href='https://cce.uni-wuppertal.de/en.html'>CCE@BUW</a> and <a href='https://www.fz-juelich.de/ias/ias-7/EN/Research/Fire_Dynamics/_node.html'>IAS-7@FZJ</a>
</br>Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</p>

          </div>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../../../_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  
  </body>
</html>